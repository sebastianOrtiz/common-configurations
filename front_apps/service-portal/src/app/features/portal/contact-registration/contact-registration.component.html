<div class="registration-container">
  <div class="registration-card">
    <!-- Header -->
    <div class="registration-header">
      <div class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
      </div>
      <h1>{{ selectedPortal()?.registration_title || 'Completa tu Perfil' }}</h1>
      <p>Por favor proporciona la siguiente información para continuar</p>
    </div>

    <!-- Registration Form -->
    <form class="registration-form" (ngSubmit)="onSubmit()" #regForm="ngForm">
      <!-- Error Alert -->
      @if (error()) {
        <div class="alert alert-error">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span>{{ error() }}</span>
        </div>
      }

      <!-- First Name -->
      <div class="form-group">
        <label for="firstName">
          Nombre *
        </label>
        <input
          type="text"
          id="firstName"
          name="firstName"
          [ngModel]="firstName()"
          (ngModelChange)="firstName.set($event)"
          placeholder="Tu nombre"
          [disabled]="loading()"
          required
        />
      </div>

      <!-- Last Name -->
      <div class="form-group">
        <label for="lastName">
          Apellido *
        </label>
        <input
          type="text"
          id="lastName"
          name="lastName"
          [ngModel]="lastName()"
          (ngModelChange)="lastName.set($event)"
          placeholder="Tu apellido"
          [disabled]="loading()"
          required
        />
      </div>

      <!-- Email (read-only) -->
      <div class="form-group">
        <label for="email">
          Email
        </label>
        <input
          type="email"
          id="email"
          name="email"
          [value]="currentUser()?.email || ''"
          readonly
          disabled
        />
      </div>

      <!-- Phone (optional) -->
      <div class="form-group">
        <label for="phone">
          Teléfono
        </label>
        <input
          type="tel"
          id="phone"
          name="phone"
          [ngModel]="phone()"
          (ngModelChange)="phone.set($event)"
          placeholder="+1234567890"
          [disabled]="loading()"
        />
      </div>

      <!-- Company (optional) -->
      <div class="form-group">
        <label for="company">
          Empresa
        </label>
        <input
          type="text"
          id="company"
          name="company"
          [ngModel]="company()"
          (ngModelChange)="company.set($event)"
          placeholder="Nombre de tu empresa"
          [disabled]="loading()"
        />
      </div>

      <!-- Actions -->
      <div class="form-actions">
        <button
          type="button"
          class="btn-secondary"
          (click)="cancel()"
          [disabled]="loading()"
        >
          Cancelar
        </button>
        <button
          type="submit"
          class="btn-primary"
          [disabled]="loading() || !regForm.form.valid"
        >
          @if (loading()) {
            <span class="spinner"></span>
            Registrando...
          } @else {
            Continuar
          }
        </button>
      </div>
    </form>
  </div>
</div>
