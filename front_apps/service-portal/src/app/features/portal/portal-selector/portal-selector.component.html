<div class="portal-selector-container">
  <div class="portal-selector-content">
    <!-- Header -->
    <div class="selector-header">
      <h1>Selecciona un Portal</h1>
      @if (currentUser()) {
        <p class="welcome-text">Bienvenido, {{ currentUser()!.full_name || currentUser()!.email }}</p>
      }
      <p class="subtitle">Elige el portal de servicios al que deseas acceder</p>
    </div>

    <!-- Loading State -->
    @if (loading()) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p>Cargando portales disponibles...</p>
      </div>
    }

    <!-- Error State -->
    @if (error() && !loading()) {
      <div class="error-container">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <p>{{ error() }}</p>
        <button class="btn-retry" (click)="retry()">
          Reintentar
        </button>
      </div>
    }

    <!-- Portals Grid -->
    @if (!loading() && !error() && portals().length > 0) {
      <div class="portals-grid">
        @for (portal of portals(); track portal.name) {
          <div
            class="portal-card"
            (click)="selectPortal(portal)"
            [style.--portal-color]="getPortalColor(portal)"
          >
            <!-- Portal Logo -->
            <div class="portal-logo">
              @if (portal.logo) {
                <img [src]="portal.logo" [alt]="portal.title" />
              } @else {
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              }
            </div>

            <!-- Portal Info -->
            <div class="portal-info">
              <h2>{{ portal.title }}</h2>
              @if (portal.description) {
                <p class="portal-description">{{ portal.description }}</p>
              }
            </div>

            <!-- Arrow Icon -->
            <div class="portal-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          </div>
        }
      </div>
    }

    <!-- Empty State -->
    @if (!loading() && !error() && portals().length === 0) {
      <div class="empty-container">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
        </svg>
        <h3>No hay portales disponibles</h3>
        <p>No se encontraron portales de servicios activos.</p>
      </div>
    }
  </div>
</div>
