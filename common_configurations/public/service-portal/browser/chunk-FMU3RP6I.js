import{a as E}from"./chunk-7U5GOQZH.js";import{a as L}from"./chunk-4CW5QDCK.js";import{Ca as k,E as f,Ea as S,F as o,Fa as z,K as M,R as l,S as c,W as s,X as r,Y as a,Z as d,ba as O,da as x,f as u,fa as i,ja as v,ma as p,na as _,oa as b,q as C,r as h,ra as w,s as P,va as y}from"./chunk-TWCYCQE2.js";import"./chunk-2NFLSA4Y.js";function j(e,n){if(e&1&&d(0,"img",10),e&2){let t=i(3);s("src",t.portal().logo,f)("alt",t.portal().portal_name)}}function I(e,n){e&1&&d(0,"app-icon",11),e&2&&s("size",32)("strokeWidth",2)}function T(e,n){if(e&1&&(r(0,"p"),p(1),a()),e&2){let t=i(3);o(),_(t.portal().description)}}function D(e,n){if(e&1&&(r(0,"div",9),l(1,j,1,2,"img",10)(2,I,1,2,"app-icon",11),a(),r(3,"div",12)(4,"h1"),p(5),a(),l(6,T,2,1,"p"),a()),e&2){let t=i(2);o(),c(t.portal().logo?1:2),o(4),_(t.portal().title),o(),c(t.portal().description?6:-1)}}function N(e,n){if(e&1&&(r(0,"div",6)(1,"span",13),p(2),a(),r(3,"div",14),p(4),a()()),e&2){let t=i(2);o(2),_(t.getUserDisplayName()),o(2),b(" ",t.getUserInitial()," ")}}function H(e,n){if(e&1){let t=O();r(0,"header",1)(1,"div",3)(2,"div",4),l(3,D,7,3),a(),r(4,"div",5),l(5,N,5,2,"div",6),r(6,"button",7),x("click",function(){h(t);let g=i();return P(g.exitPortal())}),d(7,"app-icon",8),a()()()()}if(e&2){let t=i();o(3),c(t.portal()?3:-1),o(2),c(t.userContact()?5:-1),o(2),s("size",20)("strokeWidth",2)}}var U=class e{stateService=C(L);router=C(z);portal=this.stateService.selectedPortal;userContact=this.stateService.userContact;showHeader=w(()=>!this.router.url.includes("/register"));constructor(){this.router.events.pipe(u(n=>n instanceof k)).subscribe(()=>{this.showHeader()})}getUserDisplayName(){return this.userContact()?.full_name||"Usuario"}getUserInitial(){let n=this.userContact();return n?.full_name?n.full_name.charAt(0).toUpperCase():"U"}exitPortal(){let n=this.portal();n&&(this.stateService.clearUserContact(),this.router.navigate(["/portals"]).then(()=>{this.router.navigate(["/portal",n.portal_name])}))}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=M({type:e,selectors:[["app-portal-layout"]],decls:4,vars:3,consts:[[1,"portal-layout"],[1,"portal-header"],[1,"portal-main"],[1,"header-content"],[1,"portal-info"],[1,"user-menu"],[1,"user-info"],["title","Salir",1,"btn-logout",3,"click"],["name","LogOut",3,"size","strokeWidth"],[1,"portal-logo"],[3,"src","alt"],["name","Building",3,"size","strokeWidth"],[1,"portal-text"],[1,"user-name"],[1,"user-avatar-placeholder"]],template:function(t,m){if(t&1&&(r(0,"div",0),l(1,H,8,4,"header",1),r(2,"main",2),d(3,"router-outlet"),a()()),t&2){let g;v("--portal-color",((g=m.portal())==null?null:g.primary_color)||"#667eea"),o(),c(m.showHeader()?1:-1)}},dependencies:[y,S,E],styles:[".portal-layout[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f7fafc,#edf2f7);display:flex;flex-direction:column}.portal-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #e2e8f0;box-shadow:0 2px 8px #0000000d;position:sticky;top:0;z-index:100}.portal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.5rem 2rem;display:flex;align-items:center;justify-content:space-between;gap:2rem}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:.75rem;background:linear-gradient(135deg,var(--portal-color, #667eea) 0%,rgba(118,75,162,.8) 100%);display:flex;align-items:center;justify-content:center;flex-shrink:0}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;padding:.5rem}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px;color:#fff}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1a202c;margin:0 0 .25rem}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#718096;margin:0}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#f8fafc;border:1px solid #e2e8f0;border-radius:.75rem;padding:.5rem;transition:all var(--transition-base)}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;box-shadow:var(--shadow-sm)}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:0 .5rem}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1e293b;letter-spacing:-.01em}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;object-fit:cover;border:2px solid white;box-shadow:var(--shadow-sm)}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar-placeholder[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--portal-color, #667eea) 0%,rgba(102,126,234,.8) 100%);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.125rem;border:2px solid white;box-shadow:var(--shadow-sm)}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:.5rem;background:#fff;border:1px solid #e2e8f0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-base)}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#64748b}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background:#fee2e2;border-color:#fecaca}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{color:#dc2626}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:active{transform:scale(.95)}.portal-main[_ngcontent-%COMP%]{flex:1;max-width:1400px;width:100%;margin:0 auto;padding:2rem}@media(max-width:768px){.portal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;flex-direction:column;align-items:flex-start;gap:1.5rem}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]{width:100%}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.portal-main[_ngcontent-%COMP%]{padding:1.5rem}}@media(max-width:480px){.portal-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:1rem}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]{width:48px;height:48px}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.portal-header[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]{padding:.375rem}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{padding:0 .375rem}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:.9rem}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%], .portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .user-avatar-placeholder[_ngcontent-%COMP%]{width:38px;height:38px;font-size:1rem}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:36px;height:36px}.portal-header[_ngcontent-%COMP%]   .user-menu[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.portal-main[_ngcontent-%COMP%]{padding:1rem}}"]})};export{U as PortalLayoutComponent};
