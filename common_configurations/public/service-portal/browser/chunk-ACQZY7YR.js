import{a as c}from"./chunk-5CKTUSKU.js";import{d as a,l as i,o as l}from"./chunk-AT4XZANB.js";var s="common_configurations.api",n=class o{constructor(t){this.frappeApi=t}getPortal(t){return this.frappeApi.getDoc("Service Portal",t).pipe(a(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load portal");return e.data}))}getActivePortals(){return this.frappeApi.getList("Service Portal",[["is_active","=",1]],["name","portal_name","title","description","logo","primary_color"],0,50).pipe(a(t=>{if(!t.success||!t.data)throw new Error(t.error||"Failed to load portals");return t.data}))}createUserContact(t){return this.callPortalMethod("create_user_contact",{data:JSON.stringify(t)})}updateUserContact(t,e){return this.callPortalMethod("update_user_contact",{name:t,data:JSON.stringify(e)})}getUserContactByEmail(t){return this.callPortalMethodGet("get_user_contact_by_email",{email:t})}getUserContactByDocument(t){return this.callPortalMethodGet("get_user_contact_by_document",{document:t})}getToolTypes(){return this.frappeApi.getList("Tool Type",[["is_active","=",1]],["*"],0,100).pipe(a(t=>{if(!t.success||!t.data)throw new Error(t.error||"Failed to load tool types");return t.data}))}callPortalMethodGet(t,e){return this.frappeApi.callMethod(`${s}.portal_api.${t}`,e,!0).pipe(a(r=>{if(!r.success&&r.message===void 0)throw new Error(r.error||"API call failed");return r.message}))}callPortalMethod(t,e){return this.frappeApi.callMethod(`${s}.portal_api.${t}`,e,!1).pipe(a(r=>{if(!r.success&&r.message===void 0)throw new Error(r.error||"API call failed");return r.message}))}getUserContactFields(){return this.callPortalMethodGet("get_user_contact_fields")}static \u0275fac=function(e){return new(e||o)(l(c))};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})};export{n as a};
