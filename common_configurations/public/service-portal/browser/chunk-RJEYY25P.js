import{a as T}from"./chunk-53L4QWBH.js";import"./chunk-5GGUHFV2.js";import{a as V}from"./chunk-VMHSQ5XD.js";import{$ as o,E as u,F as a,Fa as z,K as O,R as d,S as m,V as E,W as b,aa as r,ba as s,ca as M,da as S,fa as v,ga as c,ja as w,ma as l,na as C,oa as y,p as g,q as P,r as h,s as p,t as x,va as k,x as _}from"./chunk-ER7KAUPM.js";import"./chunk-2NFLSA4Y.js";var H=(t,e)=>e.name;function N(t,e){if(t&1&&(o(0,"p",3),l(1),r()),t&2){let n=c();a(),y("Bienvenido, ",n.currentUser().full_name||n.currentUser().email)}}function Y(t,e){t&1&&(o(0,"div",5),s(1,"div",9),o(2,"p"),l(3,"Cargando portales disponibles..."),r()())}function D(t,e){if(t&1){let n=M();o(0,"div",6),p(),o(1,"svg",10),s(2,"path",11),r(),x(),o(3,"p"),l(4),r(),o(5,"button",12),v("click",function(){P(n);let f=c();return h(f.retry())}),l(6," Reintentar "),r()()}if(t&2){let n=c();a(4),C(n.error())}}function F(t,e){if(t&1&&s(0,"img",16),t&2){let n=c().$implicit;S("src",n.logo,u)("alt",n.title)}}function U(t,e){t&1&&(p(),o(0,"svg",10),s(1,"path",21),r())}function L(t,e){if(t&1&&(o(0,"p",18),l(1),r()),t&2){let n=c().$implicit;a(),C(n.description)}}function $(t,e){if(t&1){let n=M();o(0,"div",14),v("click",function(){let f=P(n).$implicit,j=c(2);return h(j.selectPortal(f))}),o(1,"div",15),d(2,F,1,2,"img",16)(3,U,2,0,":svg:svg",10),r(),o(4,"div",17)(5,"h2"),l(6),r(),d(7,L,2,1,"p",18),r(),o(8,"div",19),p(),o(9,"svg",10),s(10,"path",20),r()()()}if(t&2){let n=e.$implicit,i=c(2);w("--portal-color",i.getPortalColor(n)),a(2),m(n.logo?2:3),a(4),C(n.title),a(),m(n.description?7:-1)}}function G(t,e){if(t&1&&(o(0,"div",7),E(1,$,11,5,"div",13,H),r()),t&2){let n=c();a(),b(n.portals())}}function A(t,e){t&1&&(o(0,"div",8),p(),o(1,"svg",10),s(2,"path",22),r(),x(),o(3,"h3"),l(4,"No hay portales disponibles"),r(),o(5,"p"),l(6,"No se encontraron portales de servicios activos."),r()())}var I=class t{portalService=g(T);stateService=g(V);router=g(z);portals=_([]);loading=_(!1);error=_(null);currentUser=this.stateService.currentUser;ngOnInit(){this.loadPortals()}loadPortals(){this.loading.set(!0),this.error.set(null),this.portalService.getActivePortals().subscribe({next:e=>{this.portals.set(e),this.loading.set(!1),e.length===1&&this.selectPortal(e[0])},error:e=>{console.error("Error loading portals:",e),this.error.set("Error al cargar los portales disponibles. Por favor intenta de nuevo."),this.loading.set(!1)}})}selectPortal(e){this.stateService.setSelectedPortal(e),this.stateService.userContact()?this.router.navigate(["/portal",e.portal_name]):this.router.navigate(["/portal",e.portal_name,"register"])}getPortalLogo(e){return e.logo||"assets/default-portal-logo.svg"}getPortalColor(e){return e.primary_color||"#667eea"}retry(){this.loadPortals()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=O({type:t,selectors:[["app-portal-selector"]],decls:12,vars:5,consts:[[1,"portal-selector-container"],[1,"portal-selector-content"],[1,"selector-header"],[1,"welcome-text"],[1,"subtitle"],[1,"loading-container"],[1,"error-container"],[1,"portals-grid"],[1,"empty-container"],[1,"spinner"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"btn-retry",3,"click"],[1,"portal-card",3,"--portal-color"],[1,"portal-card",3,"click"],[1,"portal-logo"],[3,"src","alt"],[1,"portal-info"],[1,"portal-description"],[1,"portal-arrow"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),l(4,"Selecciona un Portal"),r(),d(5,N,2,1,"p",3),o(6,"p",4),l(7,"Elige el portal de servicios al que deseas acceder"),r()(),d(8,Y,4,0,"div",5),d(9,D,7,1,"div",6),d(10,G,3,0,"div",7),d(11,A,7,0,"div",8),r()()),n&2&&(a(5),m(i.currentUser()?5:-1),a(3),m(i.loading()?8:-1),a(),m(i.error()&&!i.loading()?9:-1),a(),m(!i.loading()&&!i.error()&&i.portals().length>0?10:-1),a(),m(!i.loading()&&!i.error()&&i.portals().length===0?11:-1))},dependencies:[k],styles:['.portal-selector-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem;display:flex;align-items:center;justify-content:center}.portal-selector-content[_ngcontent-%COMP%]{max-width:1200px;width:100%}.selector-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;color:#fff}.selector-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0 0 1rem;text-shadow:0 2px 4px rgba(0,0,0,.1)}.selector-header[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.95;margin:0 0 .5rem}.selector-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;opacity:.9;margin:0}.loading-container[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:4rem 2rem;text-align:center;box-shadow:0 20px 60px #0000004d}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid rgba(102,126,234,.2);border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin:0 auto 1.5rem}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a5568;font-size:1rem;margin:0}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:3rem 2rem;text-align:center;box-shadow:0 20px 60px #0000004d}.error-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#e53e3e;margin:0 auto 1.5rem}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a5568;font-size:1rem;margin:0 0 1.5rem}.error-container[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:.5rem;padding:.75rem 2rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.error-container[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 20px #667eea4d}.error-container[_ngcontent-%COMP%]   .btn-retry[_ngcontent-%COMP%]:active{transform:translateY(0)}.portals-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;animation:_ngcontent-%COMP%_fadeIn .4s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.portal-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;cursor:pointer;transition:all .3s;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;gap:1.5rem;position:relative;overflow:hidden}.portal-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--portal-color, #667eea);transform:scaleX(0);transform-origin:left;transition:transform .3s}.portal-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 28px #0003}.portal-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.portal-card[_ngcontent-%COMP%]:hover   .portal-arrow[_ngcontent-%COMP%]{opacity:1;transform:translate(8px)}.portal-card[_ngcontent-%COMP%]:active{transform:translateY(-4px)}.portal-card[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:1rem;background:linear-gradient(135deg,var(--portal-color, #667eea) 0%,rgba(118,75,162,.8) 100%);display:flex;align-items:center;justify-content:center;flex-shrink:0}.portal-card[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;padding:.75rem}.portal-card[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:#fff}.portal-card[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]{flex:1}.portal-card[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1a202c;margin:0 0 .5rem}.portal-card[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   .portal-description[_ngcontent-%COMP%]{font-size:.95rem;color:#718096;line-height:1.5;margin:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.portal-card[_ngcontent-%COMP%]   .portal-arrow[_ngcontent-%COMP%]{position:absolute;right:1.5rem;top:50%;transform:translateY(-50%);opacity:0;transition:all .3s}.portal-card[_ngcontent-%COMP%]   .portal-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--portal-color, #667eea)}.empty-container[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:4rem 2rem;text-align:center;box-shadow:0 20px 60px #0000004d}.empty-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:80px;height:80px;color:#cbd5e0;margin:0 auto 1.5rem}.empty-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2d3748;margin:0 0 .5rem}.empty-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem;margin:0}@media(max-width:768px){.portal-selector-container[_ngcontent-%COMP%]{padding:1.5rem}.selector-header[_ngcontent-%COMP%]{margin-bottom:2rem}.selector-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.portals-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.portal-card[_ngcontent-%COMP%]   .portal-arrow[_ngcontent-%COMP%]{opacity:1;position:static;transform:none;align-self:flex-end}}@media(max-width:480px){.portal-selector-container[_ngcontent-%COMP%]{padding:1rem}.selector-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem}.selector-header[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:1rem}.selector-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.9rem}.portal-card[_ngcontent-%COMP%]{padding:1.5rem}.portal-card[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]{width:64px;height:64px}.portal-card[_ngcontent-%COMP%]   .portal-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.portal-card[_ngcontent-%COMP%]   .portal-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}}']})};export{I as PortalSelectorComponent};
