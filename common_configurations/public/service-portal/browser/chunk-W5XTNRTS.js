import{a as Q}from"./chunk-TJ3TUBB5.js";import{a as Z,b as tt,c as et,d as nt,e as it,f as ot,g as rt,h as at,i as st,j as ct,k as lt,l as q}from"./chunk-VRTOOWQR.js";import{a as K}from"./chunk-KPH2NHHK.js";import{a as X}from"./chunk-EQ5IH5XI.js";import{$ as d,Da as W,F as a,Fa as J,K as I,Q as Y,R as C,S as f,U as $,V as z,W as A,X as x,Y as r,Z as l,_ as v,aa as p,ba as y,ca as O,d as F,da as E,ea as P,fa as k,ga as s,ka as U,l as G,ma as c,na as b,o as B,oa as T,p as w,q as g,r as m,s as h,t as M,v as D,va as N,x as u}from"./chunk-JFEUYR63.js";import{a as j,b as H}from"./chunk-2NFLSA4Y.js";var V="common_configurations.api.otp",R=class i{constructor(e){this.frappeApi=e}getOtpSettings(){return this.callApiGet(`${V}.get_otp_settings`)}isOtpEnabled(){return this.callApiGet(`${V}.is_otp_enabled`).pipe(F(e=>e?.enabled??!1))}requestOtp(e,t="sms"){return this.callApiPost(`${V}.request_otp`,{document:e,channel:t,honeypot:""})}verifyOtp(e,t){return this.callApiPost(`${V}.verify_otp`,{document:e,otp_code:t,honeypot:""})}requestRegistrationOtp(e,t="sms"){return this.callApiPost(`${V}.request_registration_otp`,{data:JSON.stringify(e),channel:t,honeypot:""})}verifyRegistrationOtp(e,t){return this.callApiPost(`${V}.verify_registration_otp`,{phone_number:e,otp_code:t,honeypot:""})}resendRegistrationOtp(e,t){return this.callApiPost(`${V}.resend_registration_otp`,{phone_number:e,channel:t,honeypot:""})}cancelRegistration(e){return this.callApiPost(`${V}.cancel_registration`,{phone_number:e,honeypot:""})}callApiGet(e,t){return this.frappeApi.callMethod(e,t,!0).pipe(F(n=>{if(!n.success&&n.message===void 0)throw new Error(n.error||"API call failed");return n.message}))}callApiPost(e,t){return this.frappeApi.callMethod(e,t,!1).pipe(F(n=>{if(!n.success&&n.message===void 0)throw new Error(n.error||"API call failed");return n.message}))}static \u0275fac=function(t){return new(t||i)(B(K))};static \u0275prov=G({token:i,factory:i.\u0275fac,providedIn:"root"})};function mt(i,e){if(i&1){let t=O();d(0,"button",15),k("click",function(){g(t);let o=s(2);return m(o.selectChannel("sms"))}),h(),d(1,"svg",5),y(2,"path",16),p(),M(),d(3,"span",17),c(4,"SMS"),p(),d(5,"span",18),c(6,"Mensaje de texto"),p()()}if(i&2){let t=s(2);U("selected",t.selectedChannel()==="sms"),E("disabled",t.loading())}}function _t(i,e){if(i&1){let t=O();d(0,"button",19),k("click",function(){g(t);let o=s(2);return m(o.selectChannel("whatsapp"))}),h(),d(1,"svg",20),y(2,"path",21),p(),M(),d(3,"span",17),c(4,"WhatsApp"),p(),d(5,"span",18),c(6,"Mensaje de WhatsApp"),p()()}if(i&2){let t=s(2);U("selected",t.selectedChannel()==="whatsapp"),E("disabled",t.loading())}}function ut(i,e){if(i&1&&(d(0,"div",11),h(),d(1,"svg",5),y(2,"path",22),p(),M(),d(3,"span"),c(4),p()()),i&2){let t=s(2);a(4),b(t.error())}}function Ct(i,e){i&1&&(d(0,"div",14),y(1,"div",23),d(2,"span"),c(3,"Enviando c\xF3digo..."),p()())}function ft(i,e){if(i&1){let t=O();d(0,"div",1)(1,"div",3)(2,"div",4),h(),d(3,"svg",5),y(4,"path",6),p()(),M(),d(5,"h3"),c(6,"Verificaci\xF3n de identidad"),p(),d(7,"p",7),c(8," Para proteger tu cuenta, te enviaremos un c\xF3digo de verificaci\xF3n. Selecciona c\xF3mo deseas recibirlo: "),p()(),d(9,"div",8),C(10,mt,7,3,"button",9),C(11,_t,7,3,"button",10),p(),C(12,ut,5,1,"div",11),d(13,"div",12)(14,"button",13),k("click",function(){g(t);let o=s();return m(o.cancel())}),c(15," Cancelar "),p()(),C(16,Ct,4,0,"div",14),p()}if(i&2){let t=s();a(10),f(t.smsAvailable?10:-1),a(),f(t.whatsappAvailable?11:-1),a(),f(t.error()?12:-1),a(2),E("disabled",t.loading()),a(2),f(t.loading()?16:-1)}}function ht(i,e){i&1&&c(0," v\xEDa WhatsApp ")}function Mt(i,e){i&1&&c(0," v\xEDa SMS ")}function Ot(i,e){if(i&1&&(d(0,"div",11),h(),d(1,"svg",5),y(2,"path",22),p(),M(),d(3,"span"),c(4),p()()),i&2){let t=s(2);a(4),b(t.error())}}function Pt(i,e){i&1&&y(0,"div",30)}function xt(i,e){i&1&&c(0," Verificar ")}function bt(i,e){if(i&1&&(d(0,"p",32),c(1),p()),i&2){let t=s(2);a(),T(" Puedes reenviar el c\xF3digo en ",t.resendCooldown()," segundos ")}}function vt(i,e){if(i&1){let t=O();d(0,"button",34),k("click",function(){g(t);let o=s(2);return m(o.resendOtp())}),h(),d(1,"svg",5),y(2,"path",35),p(),c(3," Reenviar c\xF3digo "),p()}if(i&2){let t=s(2);E("disabled",t.loading())}}function yt(i,e){if(i&1){let t=O();d(0,"div",2)(1,"div",3)(2,"div",4),h(),d(3,"svg",5),y(4,"path",24),p()(),M(),d(5,"h3"),c(6,"Ingresa el c\xF3digo"),p(),d(7,"p",7),c(8),d(9,"strong"),c(10),p(),C(11,ht,1,0)(12,Mt,1,0),p()(),d(13,"div",25)(14,"input",26),k("input",function(o){g(t);let _=s();return m(_.onOtpInput(o))}),p(),d(15,"p",27),c(16),p()(),C(17,Ot,5,1,"div",11),d(18,"div",12)(19,"button",13),k("click",function(){g(t);let o=s();return m(o.goBackToChannelSelect())}),h(),d(20,"svg",5),y(21,"path",28),p(),c(22," Volver "),p(),M(),d(23,"button",29),k("click",function(){g(t);let o=s();return m(o.verifyOtp())}),C(24,Pt,1,0,"div",30)(25,xt,1,0),p()(),d(26,"div",31),C(27,bt,2,1,"p",32)(28,vt,4,1,"button",33),p()()}if(i&2){let t=s();a(8),T(" Enviamos un c\xF3digo de ",(t.otpSettings==null?null:t.otpSettings.otp_length)||6," d\xEDgitos a "),a(2),b(t.maskedPhone()),a(),f(t.selectedChannel()==="whatsapp"?11:12),a(3),E("value",t.otpCode())("disabled",t.loading()),Y("maxlength",(t.otpSettings==null?null:t.otpSettings.otp_length)||6),a(2),T(" El c\xF3digo expira en ",t.expiryMinutes()," minutos "),a(),f(t.error()?17:-1),a(2),E("disabled",t.loading()),a(4),E("disabled",t.loading()||!t.otpCode()),a(),f(t.loading()?24:25),a(3),f(t.resendCooldown()>0?27:28)}}var L=class i{otpService=w(R);document;otpSettings=null;phoneNumber;mode="login";formData=null;verified=new D;registrationVerified=new D;cancelled=new D;currentStep=u("channel-select");selectedChannel=u("sms");otpCode=u("");maskedPhone=u("");expiryMinutes=u(5);loading=u(!1);error=u(null);otpSent=u(!1);resendCooldown=u(0);cooldownInterval=null;ngOnInit(){if(this.otpSettings?.default_channel&&this.selectedChannel.set(this.otpSettings.default_channel),this.otpSettings){let e=this.otpSettings.sms_available??!1,t=this.otpSettings.whatsapp_available??!1;e&&!t?(this.selectedChannel.set("sms"),this.sendOtp()):!e&&t&&(this.selectedChannel.set("whatsapp"),this.sendOtp())}}get smsAvailable(){return this.otpSettings?.sms_available??!1}get whatsappAvailable(){return this.otpSettings?.whatsapp_available??!1}selectChannel(e){this.selectedChannel.set(e),this.sendOtp()}sendOtp(){this.loading.set(!0),this.error.set(null),(this.mode==="registration"&&this.formData!==null?this.otpService.requestRegistrationOtp(this.formData,this.selectedChannel()):this.otpService.requestOtp(this.document,this.selectedChannel())).subscribe({next:t=>{this.loading.set(!1),t.success?(this.otpSent.set(!0),this.currentStep.set("code-input"),this.maskedPhone.set(t.phone||"****"),this.expiryMinutes.set(t.expiry_minutes||5),this.startResendCooldown()):this.error.set(t.message||"Error al enviar el c\xF3digo")},error:t=>{console.error("Error requesting OTP:",t),this.loading.set(!1),this.error.set(t.message||"Error al enviar el c\xF3digo. Por favor intenta de nuevo.")}})}verifyOtp(){let e=this.otpCode().trim();if(!e){this.error.set("Por favor ingresa el c\xF3digo de verificaci\xF3n");return}if(this.loading.set(!0),this.error.set(null),this.mode==="registration"){let t=this.formData?.phone_number||"";this.otpService.verifyRegistrationOtp(t,e).subscribe({next:n=>{this.loading.set(!1),n.success&&n.auth_token&&n.user_contact?this.registrationVerified.emit({auth_token:n.auth_token,user_contact:n.user_contact}):this.error.set("C\xF3digo inv\xE1lido. Por favor intenta de nuevo.")},error:n=>{console.error("Error verifying registration OTP:",n),this.loading.set(!1),this.error.set(n.message||"C\xF3digo inv\xE1lido. Por favor intenta de nuevo.")}})}else this.otpService.verifyOtp(this.document,e).subscribe({next:t=>{this.loading.set(!1),t.success&&t.auth_token?this.verified.emit(t.auth_token):this.error.set("C\xF3digo inv\xE1lido. Por favor intenta de nuevo.")},error:t=>{console.error("Error verifying OTP:",t),this.loading.set(!1),this.error.set(t.message||"C\xF3digo inv\xE1lido. Por favor intenta de nuevo.")}})}resendOtp(){if(!(this.resendCooldown()>0))if(this.otpCode.set(""),this.error.set(null),this.mode==="registration"){let e=this.formData?.phone_number||"";this.loading.set(!0),this.otpService.resendRegistrationOtp(e,this.selectedChannel()).subscribe({next:t=>{this.loading.set(!1),t.success?(this.maskedPhone.set(t.phone||"****"),this.expiryMinutes.set(t.expiry_minutes||5),this.startResendCooldown()):this.error.set(t.message||"Error al reenviar el c\xF3digo")},error:t=>{console.error("Error resending registration OTP:",t),this.loading.set(!1),this.error.set(t.message||"Error al reenviar el c\xF3digo. Por favor intenta de nuevo.")}})}else this.sendOtp()}startResendCooldown(){this.resendCooldown.set(60),this.cooldownInterval&&clearInterval(this.cooldownInterval),this.cooldownInterval=setInterval(()=>{let e=this.resendCooldown();e>0?this.resendCooldown.set(e-1):(clearInterval(this.cooldownInterval),this.cooldownInterval=null)},1e3)}goBackToChannelSelect(){this.currentStep.set("channel-select"),this.otpCode.set(""),this.error.set(null),this.otpSent.set(!1)}cancel(){this.cooldownInterval&&clearInterval(this.cooldownInterval),this.mode==="registration"&&this.formData?.phone_number?this.otpService.cancelRegistration(this.formData.phone_number).subscribe({next:()=>{this.cancelled.emit()},error:()=>{this.cancelled.emit()}}):this.cancelled.emit()}onOtpInput(e){let t=e.target,n=t.value.replace(/[^0-9]/g,"");this.otpCode.set(n),t.value=n}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=I({type:i,selectors:[["app-otp-verification"]],inputs:{document:"document",otpSettings:"otpSettings",phoneNumber:"phoneNumber",mode:"mode",formData:"formData"},outputs:{verified:"verified",registrationVerified:"registrationVerified",cancelled:"cancelled"},decls:3,vars:2,consts:[[1,"otp-verification"],[1,"otp-step","channel-select"],[1,"otp-step","code-input"],[1,"step-header"],[1,"step-icon"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"step-description"],[1,"channel-options"],["type","button",1,"channel-btn","sms",3,"selected","disabled"],["type","button",1,"channel-btn","whatsapp",3,"selected","disabled"],[1,"error-message"],[1,"step-actions"],["type","button",1,"btn-secondary",3,"click","disabled"],[1,"loading-overlay"],["type","button",1,"channel-btn","sms",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"],[1,"channel-label"],[1,"channel-desc"],["type","button",1,"channel-btn","whatsapp",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor"],["d","M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"spinner"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"otp-input-container"],["type","text","placeholder","------","autocomplete","one-time-code","inputmode","numeric","pattern","[0-9]*",1,"otp-input",3,"input","value","disabled"],[1,"expiry-hint"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"btn-spinner"],[1,"resend-section"],[1,"resend-cooldown"],["type","button",1,"btn-link","resend-btn",3,"disabled"],["type","button",1,"btn-link","resend-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"]],template:function(t,n){t&1&&(d(0,"div",0),C(1,ft,17,5,"div",1),C(2,yt,29,12,"div",2),p()),t&2&&(a(),f(n.currentStep()==="channel-select"?1:-1),a(),f(n.currentStep()==="code-input"?2:-1))},dependencies:[N,q],styles:[".otp-verification[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto}.otp-step[_ngcontent-%COMP%]{position:relative;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.step-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.step-header[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{width:56px;height:56px;margin:0 auto .75rem;padding:12px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%}.step-header[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff}.step-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.25rem;font-weight:600;color:#333}.step-header[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#666;line-height:1.5}.step-header[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;font-weight:600}.channel-options[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.channel-btn[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;padding:1.25rem 1rem;border:2px solid #e0e0e0;border-radius:12px;background:#fff;cursor:pointer;transition:all .2s ease}.channel-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;background:#667eea0a}.channel-btn.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#667eea14}.channel-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.channel-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px;margin-bottom:.5rem}.channel-btn.sms[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#2196f3}.channel-btn.whatsapp[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#25d366}.channel-btn[_ngcontent-%COMP%]   .channel-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333}.channel-btn[_ngcontent-%COMP%]   .channel-desc[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-top:.25rem}.otp-input-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.otp-input[_ngcontent-%COMP%]{width:100%;max-width:220px;padding:1rem;font-size:1.75rem;font-weight:600;text-align:center;letter-spacing:.5rem;border:2px solid #e0e0e0;border-radius:12px;outline:none;transition:border-color .2s ease,box-shadow .2s ease}.otp-input[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea26}.otp-input[_ngcontent-%COMP%]::placeholder{color:#ccc;letter-spacing:.25rem}.otp-input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.expiry-hint[_ngcontent-%COMP%]{margin:.75rem 0 0;font-size:.8rem;color:#888}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;margin-bottom:1rem;background:#ffebee;border-radius:8px;color:#c62828;font-size:.875rem}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.step-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;font-size:.9rem;font-weight:500;border-radius:8px;border:none;cursor:pointer;transition:all .2s ease;min-width:120px}.btn-primary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 4px 12px #667eea66;transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0}.btn-secondary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#666}.btn-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.25rem;padding:.5rem;background:none;border:none;color:#667eea;font-size:.875rem;font-weight:500;cursor:pointer;transition:color .2s ease}.btn-link[_ngcontent-%COMP%]:hover:not(:disabled){color:#764ba2}.btn-link[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.resend-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #eee;text-align:center}.resend-cooldown[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#888}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;background:#fffffff2;border-radius:12px;z-index:10}.loading-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.spinner[_ngcontent-%COMP%], .btn-spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid #e0e0e0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:4px}.btn-spinner[_ngcontent-%COMP%]{width:18px;height:18px;border-width:2px;border-color:#ffffff4d;border-top-color:#fff}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:480px){.otp-step[_ngcontent-%COMP%]{padding:1rem}.channel-options[_ngcontent-%COMP%]{flex-direction:column}.channel-btn[_ngcontent-%COMP%]{padding:1rem}.step-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}}"]})};var St=(i,e)=>e.fieldname;function wt(i,e){i&1&&(r(0,"div",8),v(1,"div",13),r(2,"p"),c(3,"Cargando formulario..."),l()())}function Et(i,e){if(i&1){let t=O();r(0,"div",9),h(),r(1,"svg",6),v(2,"path",14),l(),M(),r(3,"p"),c(4),l(),r(5,"button",15),P("click",function(){g(t);let o=s();return m(o.loadFields())}),c(6,"Reintentar"),l()()}if(i&2){let t=s();a(4),b(t.error())}}function kt(i,e){if(i&1){let t=O();r(0,"div",10)(1,"p",16),c(2,"\xBFYa te has registrado anteriormente?"),l(),r(3,"div",17)(4,"button",18),P("click",function(){g(t);let o=s();return m(o.goToLogin())}),r(5,"div",19),h(),r(6,"svg",6),v(7,"path",20),l()(),M(),r(8,"span",21),c(9,"Estoy registrado"),l(),r(10,"span",22),c(11,"Ya tengo mis datos en el sistema"),l()(),r(12,"button",23),P("click",function(){g(t);let o=s();return m(o.goToRegister())}),r(13,"div",19),h(),r(14,"svg",6),v(15,"path",24),l()(),M(),r(16,"span",21),c(17,"Registrarme"),l(),r(18,"span",22),c(19,"Es mi primera vez"),l()()()()}}function Vt(i,e){if(i&1&&(r(0,"div",28),h(),r(1,"svg",6),v(2,"path",14),l(),M(),r(3,"span"),c(4),l()()),i&2){let t=s(2);a(4),b(t.error())}}function Tt(i,e){if(i&1&&(r(0,"option",38),c(1),l()),i&2){let t=e.$implicit;x("value",t),a(),b(t)}}function Rt(i,e){if(i&1){let t=O();r(0,"div",29)(1,"label",35),c(2),r(3,"span",31),c(4,"*"),l()(),r(5,"select",36),P("ngModelChange",function(o){let _=g(t),S=s(2);return m(S.setFieldValue(_.fieldname,o))}),r(6,"option",37),c(7,"Seleccionar..."),l(),z(8,Tt,2,2,"option",38,$),l()()}if(i&2){let t=e,n=s(2);a(),x("for",t.fieldname),a(),T(" ",t.label," "),a(3),x("id",t.fieldname)("name",t.fieldname)("ngModel",n.getFieldValue(t.fieldname))("disabled",n.loading()),a(3),A(n.getDocumentTypeOptions())}}function Ft(i,e){i&1&&(v(0,"span",13),c(1," Conectando... "))}function Dt(i,e){i&1&&c(0," Conectar ")}function It(i,e){if(i&1){let t=O();r(0,"form",25,0),P("ngSubmit",function(){g(t);let o=s();return m(o.onConnect())}),r(2,"button",26),P("click",function(){g(t);let o=s();return m(o.goToInitial())}),h(),r(3,"svg",6),v(4,"path",27),l(),c(5," Volver "),l(),M(),r(6,"p",16),c(7,"Ingresa tu n\xFAmero de documento para conectarte"),l(),C(8,Vt,5,1,"div",28),C(9,Rt,10,6,"div",29),r(10,"div",29)(11,"label",30),c(12," N\xFAmero de documento "),r(13,"span",31),c(14,"*"),l()(),r(15,"input",32),P("ngModelChange",function(o){g(t);let _=s();return m(_.setFieldValue("document",o))}),l()(),r(16,"div",33)(17,"button",34),C(18,Ft,2,0)(19,Dt,1,0),l()()()}if(i&2){let t,n=s();a(8),f(n.error()?8:-1),a(),f((t=n.getDocumentTypeField())?9:-1,t),a(6),x("ngModel",n.getFieldValue("document"))("disabled",n.loading()),a(2),x("disabled",n.loading()),a(),f(n.loading()?18:19)}}function zt(i,e){if(i&1&&(r(0,"div",28),h(),r(1,"svg",6),v(2,"path",14),l(),M(),r(3,"span"),c(4),l()()),i&2){let t=s(2);a(4),b(t.error())}}function At(i,e){i&1&&(r(0,"span",31),c(1,"*"),l())}function Nt(i,e){if(i&1){let t=O();r(0,"input",46),P("ngModelChange",function(o){g(t);let _=s().$implicit,S=s(2);return m(S.setFieldValue(_.fieldname,o))}),l()}if(i&2){let t=s().$implicit,n=s(2);x("type",n.getInputType(t))("id",t.fieldname)("name",t.fieldname)("ngModel",n.getFieldValue(t.fieldname))("placeholder",t.description||t.label)("disabled",n.loading())("required",t.reqd===1)}}function qt(i,e){if(i&1&&(r(0,"option",38),c(1),l()),i&2){let t=e.$implicit;x("value",t),a(),b(t)}}function Lt(i,e){if(i&1){let t=O();r(0,"select",47),P("ngModelChange",function(o){g(t);let _=s().$implicit,S=s(2);return m(S.setFieldValue(_.fieldname,o))}),r(1,"option",37),c(2,"Seleccionar..."),l(),z(3,qt,2,2,"option",38,$),l()}if(i&2){let t=s().$implicit,n=s(2);x("id",t.fieldname)("name",t.fieldname)("ngModel",n.getFieldValue(t.fieldname))("disabled",n.loading())("required",t.reqd===1),a(3),A(n.getSelectOptions(t))}}function jt(i,e){if(i&1){let t=O();r(0,"div",43)(1,"input",48),P("ngModelChange",function(o){g(t);let _=s().$implicit,S=s(2);return m(S.setFieldValue(_.fieldname,o?1:0))}),l(),r(2,"span"),c(3),l()()}if(i&2){let t=s().$implicit,n=s(2);a(),x("id",t.fieldname)("name",t.fieldname)("ngModel",n.getFieldValue(t.fieldname))("disabled",n.loading()),a(2),b(t.description||t.label)}}function $t(i,e){if(i&1){let t=O();r(0,"textarea",49),P("ngModelChange",function(o){g(t);let _=s().$implicit,S=s(2);return m(S.setFieldValue(_.fieldname,o))}),l()}if(i&2){let t=s().$implicit,n=s(2);x("id",t.fieldname)("name",t.fieldname)("ngModel",n.getFieldValue(t.fieldname))("placeholder",t.description||t.label)("disabled",n.loading())("required",t.reqd===1)("rows",t.fieldtype==="Long Text"?6:3)}}function Ut(i,e){if(i&1&&(r(0,"small",45),c(1),l()),i&2){let t=s().$implicit;a(),b(t.description)}}function Ht(i,e){if(i&1&&(r(0,"div",29)(1,"label",35),c(2),C(3,At,2,0,"span",31),l(),C(4,Nt,1,7,"input",41)(5,Lt,5,5,"select",42)(6,jt,4,5,"div",43)(7,$t,1,7,"textarea",44),C(8,Ut,2,1,"small",45),l()),i&2){let t=e.$implicit;a(),x("for",t.fieldname),a(),T(" ",t.label," "),a(),f(t.reqd?3:-1),a(),f(t.fieldtype!=="Select"&&t.fieldtype!=="Check"&&t.fieldtype!=="Text"&&t.fieldtype!=="Small Text"&&t.fieldtype!=="Long Text"?4:t.fieldtype==="Select"?5:t.fieldtype==="Check"?6:7),a(4),f(t.description&&t.fieldtype!=="Check"?8:-1)}}function Gt(i,e){i&1&&(v(0,"span",13),c(1," Registrando... "))}function Bt(i,e){i&1&&c(0," Continuar ")}function Yt(i,e){if(i&1){let t=O();r(0,"form",25,1),P("ngSubmit",function(){g(t);let o=s();return m(o.onSubmit())}),r(2,"button",26),P("click",function(){g(t);let o=s();return m(o.goToInitial())}),h(),r(3,"svg",6),v(4,"path",27),l(),c(5," Volver "),l(),C(6,zt,5,1,"div",28),z(7,Ht,9,5,"div",29,St),M(),r(9,"div",33)(10,"button",39),P("click",function(){g(t);let o=s();return m(o.goToInitial())}),c(11," Cancelar "),l(),r(12,"button",40),C(13,Gt,2,0)(14,Bt,1,0),l()()()}if(i&2){let t=s();a(6),f(t.error()?6:-1),a(),A(t.fields()),a(3),x("disabled",t.loading()),a(2),x("disabled",t.loading()||t.loadingFields()),a(),f(t.loading()?13:14)}}function Wt(i,e){if(i&1){let t=O();r(0,"div",12)(1,"app-otp-verification",50),P("verified",function(o){g(t);let _=s();return m(_.onOtpVerified(o))})("registrationVerified",function(o){g(t);let _=s();return m(_.onRegistrationVerified(o))})("cancelled",function(){g(t);let o=s();return m(o.onOtpCancelled())}),l()()}if(i&2){let t=s();a(),x("document",t.otpDocument())("otpSettings",t.otpSettings())("mode",t.otpMode())("formData",t.registrationFormData())}}var pt=class i{route=w(W);router=w(J);portalService=w(Q);stateService=w(X);otpService=w(R);currentStep=u("initial");fields=u([]);formData=u({});loadingFields=u(!0);loading=u(!1);error=u(null);otpSettings=u(null);otpDocument=u("");otpMode=u("login");registrationFormData=u(null);existingContact=null;pendingOtpContact=null;currentUser=this.stateService.currentUser;selectedPortal=this.stateService.selectedPortal;ngOnInit(){if(this.stateService.userContact()){let e=this.route.snapshot.paramMap.get("portalName");e&&this.router.navigate(["/portal",e]);return}this.loadFields()}loadFields(){this.loadingFields.set(!0),this.error.set(null),this.portalService.getUserContactFields().subscribe({next:e=>{this.fields.set(e);let t={};e.forEach(n=>{n.default&&(t[n.fieldname]=n.default)}),this.formData.set(t),this.loadingFields.set(!1)},error:e=>{console.error("Error loading fields:",e),this.error.set("Error al cargar el formulario. Por favor intenta de nuevo."),this.loadingFields.set(!1)}})}getFieldValue(e){return this.formData()[e]||""}setFieldValue(e,t){let n=this.formData();this.formData.set(H(j({},n),{[e]:t}))}getSelectOptions(e){return e.options?e.options.split(`
`).map(t=>t.trim()).filter(t=>t):[]}getInputType(e){switch(e.fieldtype){case"Int":case"Float":case"Currency":return"number";case"Email":case"Phone":return e.fieldtype.toLowerCase();case"Date":return"date";case"Datetime":return"datetime-local";case"Time":return"time";case"Check":return"checkbox";default:return"text"}}validateForm(){let e=this.formData(),t=this.fields();for(let o of t)if(o.reqd){let _=e[o.fieldname];if(_==null||_==="")return`El campo "${o.label}" es obligatorio`}let n=t.find(o=>o.fieldtype==="Email"||o.options==="Email");return n&&e[n.fieldname]&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e[n.fieldname])?`Por favor ingresa un email v\xE1lido en "${n.label}"`:null}goToLogin(){this.currentStep.set("login"),this.error.set(null),this.existingContact=null,this.formData.set({document_type:"Cedula de ciudadania"})}goToRegister(){this.currentStep.set("register"),this.error.set(null),this.existingContact=null;let e={};this.fields().forEach(t=>{t.default&&(e[t.fieldname]=t.default)}),this.formData.set(e)}goToInitial(){this.currentStep.set("initial"),this.error.set(null),this.existingContact=null,this.formData.set({})}validateLoginForm(){let e=this.formData();return!e.document_type||e.document_type.toString().trim()===""?"Por favor selecciona el tipo de documento":!e.document||e.document.toString().trim()===""?"Por favor ingresa el n\xFAmero de documento":null}onConnect(){this.error.set(null);let e=this.validateLoginForm();if(e){this.error.set(e);return}let t=this.selectedPortal();if(!t){this.error.set("Error de sesion. Por favor recarga la pagina.");return}this.loading.set(!0);let n=this.formData().document?.toString().trim();this.portalService.getUserContactByDocument(n).subscribe({next:o=>{this.loading.set(!1),o?o.requires_otp&&o.otp_settings?(this.pendingOtpContact=o,this.otpSettings.set(o.otp_settings),this.otpDocument.set(n),this.currentStep.set("otp")):o.auth_token?(this.stateService.setUserContact(o,o.auth_token),this.router.navigate(["/portal",t.portal_name])):this.error.set("Error de autenticacion. Por favor intenta de nuevo."):this.error.set("No se encontro un usuario registrado con ese numero de documento. Por favor verifica los datos o registrate como nuevo usuario.")},error:o=>{console.error("Error connecting:",o),this.error.set(o.message||"Error al buscar el usuario. Por favor intenta de nuevo."),this.loading.set(!1)}})}getDocumentTypeOptions(){let e=this.fields().find(t=>t.fieldname==="document_type");return e&&e.options?e.options.split(`
`).map(t=>t.trim()).filter(t=>t):[]}getDocumentTypeField(){return this.fields().find(e=>e.fieldname==="document_type")}onSubmit(){this.error.set(null);let e=this.validateForm();if(e){this.error.set(e);return}let t=this.selectedPortal();if(!t){this.error.set("Error de sesi\xF3n. Por favor recarga la p\xE1gina.");return}this.loading.set(!0);let n=j({},this.formData());this.existingContact&&this.existingContact.name?this.portalService.updateUserContact(this.existingContact.name,n).subscribe({next:o=>{this.stateService.setUserContact(o,this.existingContact?.auth_token),this.loading.set(!1),this.router.navigate(["/portal",t.portal_name])},error:o=>{console.error("Error updating contact:",o),this.error.set(o.message||"Error al actualizar la informaci\xF3n. Por favor intenta de nuevo."),this.loading.set(!1)}}):this.otpService.getOtpSettings().subscribe({next:o=>{this.loading.set(!1),o.enabled?(this.registrationFormData.set(n),this.otpSettings.set(o),this.otpDocument.set(n.document||""),this.otpMode.set("registration"),this.currentStep.set("otp")):this.createUserDirectly(n,t.portal_name)},error:o=>{console.error("Error checking OTP settings:",o),this.createUserDirectly(n,t.portal_name)}})}createUserDirectly(e,t){this.loading.set(!0),this.portalService.createUserContact(e).subscribe({next:n=>{this.loading.set(!1),n.auth_token?(this.stateService.setUserContact(n,n.auth_token),this.router.navigate(["/portal",t])):this.error.set("Error de autenticaci\xF3n. Por favor intenta de nuevo.")},error:n=>{console.error("Error creating contact:",n),this.error.set(n.message||"Error al registrar la informaci\xF3n. Por favor intenta de nuevo."),this.loading.set(!1)}})}skip(){}cancel(){this.router.navigate(["/portals"])}onOtpVerified(e){let t=this.selectedPortal();if(!t){this.error.set("Error de sesion. Por favor recarga la pagina."),this.currentStep.set("initial");return}this.portalService.setAuthToken(e),this.pendingOtpContact&&this.stateService.setUserContact(this.pendingOtpContact,e),this.router.navigate(["/portal",t.portal_name])}onRegistrationVerified(e){let t=this.selectedPortal();if(!t){this.error.set("Error de sesion. Por favor recarga la pagina."),this.currentStep.set("initial");return}this.portalService.setAuthToken(e.auth_token),this.stateService.setUserContact(e.user_contact,e.auth_token),this.registrationFormData.set(null),this.router.navigate(["/portal",t.portal_name])}onOtpCancelled(){this.pendingOtpContact=null,this.otpSettings.set(null),this.otpDocument.set(""),this.otpMode.set("login"),this.registrationFormData.set(null),this.currentStep.set("initial"),this.error.set(null)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=I({type:i,selectors:[["app-contact-registration"]],decls:16,vars:3,consts:[["loginForm","ngForm"],["regForm","ngForm"],[1,"registration-container"],[1,"registration-card"],[1,"registration-header"],[1,"icon"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"loading-state"],[1,"error-state"],[1,"step-initial"],[1,"registration-form"],[1,"step-otp"],[1,"spinner"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"btn-primary",3,"click"],[1,"step-description"],[1,"choice-buttons"],[1,"btn-choice","btn-login",3,"click"],[1,"choice-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"choice-title"],[1,"choice-subtitle"],[1,"btn-choice","btn-register",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"registration-form",3,"ngSubmit"],["type","button",1,"btn-back",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"alert","alert-error"],[1,"form-group"],["for","document"],[1,"required"],["type","text","id","document","name","document","placeholder","Ingresa tu n\xFAmero de documento","required","",3,"ngModelChange","ngModel","disabled"],[1,"form-actions"],["type","submit",1,"btn-primary","btn-full",3,"disabled"],[3,"for"],["required","",3,"ngModelChange","id","name","ngModel","disabled"],["value",""],[3,"value"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","submit",1,"btn-primary",3,"disabled"],[3,"type","id","name","ngModel","placeholder","disabled","required"],[3,"id","name","ngModel","disabled","required"],[1,"checkbox-wrapper"],[3,"id","name","ngModel","placeholder","disabled","required","rows"],[1,"field-description"],[3,"ngModelChange","type","id","name","ngModel","placeholder","disabled","required"],[3,"ngModelChange","id","name","ngModel","disabled","required"],["type","checkbox",3,"ngModelChange","id","name","ngModel","disabled"],[3,"ngModelChange","id","name","ngModel","placeholder","disabled","required","rows"],[3,"verified","registrationVerified","cancelled","document","otpSettings","mode","formData"]],template:function(t,n){if(t&1&&(r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),h(),r(4,"svg",6),v(5,"path",7),l()(),M(),r(6,"h1"),c(7),l(),r(8,"p"),c(9),l()(),C(10,wt,4,0,"div",8)(11,Et,7,1,"div",9)(12,kt,20,0,"div",10)(13,It,20,6,"form",11)(14,Yt,15,4,"form",11)(15,Wt,2,4,"div",12),l()()),t&2){let o,_;a(7),b(((o=n.selectedPortal())==null?null:o.registration_title)||"Registro de Contacto"),a(2),b(((_=n.selectedPortal())==null?null:_.registration_description)||"Por favor ingresa los datos de la persona para quien se agendar\xE1 el servicio"),a(),f(n.loadingFields()?10:n.error()&&n.fields().length===0?11:n.currentStep()==="initial"?12:n.currentStep()==="login"?13:n.currentStep()==="register"?14:n.currentStep()==="otp"?15:-1)}},dependencies:[N,q,rt,st,ct,tt,Z,at,et,nt,lt,ot,it,L],styles:[`.registration-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem}.registration-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;box-shadow:0 20px 60px #0000004d;max-width:500px;width:100%;padding:2.5rem;animation:_ngcontent-%COMP%_slideIn .4s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.registration-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.registration-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:64px;height:64px;margin:0 auto 1rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:1rem;display:flex;align-items:center;justify-content:center}.registration-header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.registration-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1a202c;margin:0 0 .5rem}.registration-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:.95rem;margin:0}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 1.5rem;border:4px solid #e2e8f0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem}.error-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem}.error-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:#e53e3e;margin:0 auto 1rem;display:block}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem;margin-bottom:1.5rem}.error-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer}.step-initial[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{text-align:center;color:#4a5568;font-size:1.1rem;margin-bottom:1.5rem}.step-initial[_ngcontent-%COMP%]   .choice-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:2rem}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1.5rem;border:2px solid #e2e8f0;border-radius:.75rem;background:#fff;cursor:pointer;transition:all .2s}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]:hover{border-color:#667eea;transform:translateY(-2px);box-shadow:0 10px 20px #667eea26}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{width:56px;height:56px;margin-bottom:1rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:#fff}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#2d3748;margin-bottom:.25rem}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#718096}.step-initial[_ngcontent-%COMP%]   .btn-full[_ngcontent-%COMP%]{width:100%}.btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:none;border:none;color:#667eea;font-size:.95rem;font-weight:500;cursor:pointer;padding:.5rem 0;margin-bottom:1rem;transition:color .2s}.btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn-back[_ngcontent-%COMP%]:hover{color:#764ba2}.step-description[_ngcontent-%COMP%]{color:#4a5568;font-size:1rem;margin-bottom:1.5rem;text-align:center}.registration-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem}.registration-form[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.registration-form[_ngcontent-%COMP%]   .alert-error[_ngcontent-%COMP%]{background:#fff5f5;color:#c53030;border:1px solid #feb2b2}.registration-form[_ngcontent-%COMP%]   .alert-info[_ngcontent-%COMP%]{background:#ebf8ff;color:#2c5282;border:1px solid #90cdf4}.registration-form[_ngcontent-%COMP%]   .alert-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#3182ce}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#2d3748;margin-bottom:.5rem;font-size:.9rem}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=datetime-local][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:.5rem;font-size:1rem;transition:all .2s;box-sizing:border-box;font-family:inherit}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=datetime-local][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=tel][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=date][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=datetime-local][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=datetime-local][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=time][readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[readonly][_ngcontent-%COMP%], .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%]{background:#f7fafc;cursor:not-allowed;opacity:.6}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=tel][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=datetime-local][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::placeholder, .registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#cbd5e0}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23667eea' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:1.25rem;padding-right:2.5rem}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;width:100%}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-spinner[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);display:flex;align-items:center}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-spinner[_ngcontent-%COMP%]   .mini-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e2e8f0;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem 0}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;cursor:pointer}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4a5568;font-size:.95rem}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .field-description[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#718096;font-size:.875rem;line-height:1.4}.registration-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#e53e3e;margin-left:.25rem}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.875rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#edf2f7;color:#2d3748}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e2e8f0}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #667eea4d}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media(max-width:480px){.registration-container[_ngcontent-%COMP%]{padding:1rem}.registration-card[_ngcontent-%COMP%]{padding:1.5rem}.registration-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]{padding:1.25rem}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]{width:48px;height:48px}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.step-initial[_ngcontent-%COMP%]   .btn-choice[_ngcontent-%COMP%]   .choice-title[_ngcontent-%COMP%]{font-size:1rem}.registration-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}}.step-otp[_ngcontent-%COMP%]{padding:.5rem 0;--primary-color: #667eea;--primary-color-dark: #5a67d8}`]})};export{pt as ContactRegistrationComponent};
