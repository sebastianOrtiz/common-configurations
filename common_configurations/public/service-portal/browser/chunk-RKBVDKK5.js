import{a as d}from"./chunk-753TLAVK.js";import{d as a,k as s,n as c}from"./chunk-5KXQTZGH.js";var p="meet_scheduling.api.appointment_api",m=class l{constructor(t){this.frappeApi=t}getActiveCalendarResources(){return this.frappeApi.callMethod(`${p}.get_active_calendar_resources`,{},!0).pipe(a(t=>{if(!t.success)throw new Error(t.error||"Failed to load calendar resources");return t.message||[]}))}getAvailableSlots(t,e,n){return this.frappeApi.callMethod(`${p}.get_available_slots`,{calendar_resource:t,from_date:e,to_date:n},!0).pipe(a(r=>{if(!r.success)throw new Error(r.error||"Failed to load available slots");return r.message||[]}))}validateAppointment(t,e,n,r){return this.frappeApi.callMethod(`${p}.validate_appointment`,{calendar_resource:t,start_datetime:e,end_datetime:n,appointment_name:r},!0).pipe(a(i=>{if(!i.message)throw new Error(i.error||"Validation failed");return i.message}))}createAndConfirmAppointment(t,e,n,r,i){return this.frappeApi.callMethod(`${p}.create_and_confirm_appointment`,{calendar_resource:t,user_contact:e,start_datetime:n,end_datetime:r,appointment_context:i,honeypot:""}).pipe(a(o=>{if(!o.success&&!o.message)throw new Error(o.error||"Failed to create appointment");return o.message}))}cancelAppointment(t){return this.frappeApi.callMethod(`${p}.cancel_or_delete_appointment`,{appointment_name:t}).pipe(a(e=>{if(!e.success&&!e.message)throw new Error(e.error||"Failed to cancel appointment");return e.message}))}getAppointment(t){return this.frappeApi.getDoc("Appointment",t).pipe(a(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load appointment");return e.data}))}generateMeeting(t){return this.frappeApi.callMethod(`${p}.generate_meeting`,{appointment_name:t}).pipe(a(e=>{if(!e.message)throw new Error(e.error||"Failed to generate meeting");return e.message}))}getCalendarResource(t){return this.frappeApi.getDoc("Calendar Resource",t).pipe(a(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load calendar resource");return e.data}))}getAvailabilityPlan(t){return this.frappeApi.getDoc("Availability Plan",t).pipe(a(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load availability plan");return e.data}))}getUserAppointments(t){return this.frappeApi.getList("Appointment",[["user_contact","=",t]],["*"],0,100).pipe(a(e=>!e.success||!e.data?[]:e.data))}getResourceAppointments(t,e,n){let r=[["calendar_resource","=",t]];return e&&r.push(["start_datetime",">=",e]),n&&r.push(["start_datetime","<=",n]),this.frappeApi.getList("Appointment",r,["*"],0,100).pipe(a(i=>!i.success||!i.data?[]:i.data))}static \u0275fac=function(e){return new(e||l)(c(d))};static \u0275prov=s({token:l,factory:l.\u0275fac,providedIn:"root"})};export{m as a};
