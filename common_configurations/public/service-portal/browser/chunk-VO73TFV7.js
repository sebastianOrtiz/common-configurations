import{b as Z,c as ee,f as te,l as ne}from"./chunk-VRTOOWQR.js";import{a as oe}from"./chunk-MH7DOIFF.js";import"./chunk-UXRKF7XX.js";import{a as X}from"./chunk-EQ5IH5XI.js";import{$ as S,E as Y,F as r,Fa as Q,K as H,R as m,S as g,U as J,V as A,W as z,X as x,Y as i,Z as a,_ as p,aa as w,ba as D,ca as P,da as W,ea as f,fa as q,ga as s,ka as T,la as U,ma as l,na as k,oa as I,p as N,pa as R,q as h,r as b,ra as K,s as d,t as C,v as F,va as G,x as u}from"./chunk-JFEUYR63.js";import{a as $,b as B}from"./chunk-2NFLSA4Y.js";function ce(n,t){n&1&&(d(),D(0,"rect",3))}function se(n,t){n&1&&(d(),D(0,"path",4))}function de(n,t){n&1&&l(0," Detener ")}function me(n,t){if(n&1&&l(0),n&2){let e=s();I(" ",e.buttonLabel," ")}}function ge(n,t){n&1&&(S(0,"div",6),D(1,"span",9),S(2,"span",10),l(3,"Grabando..."),w()())}function pe(n,t){if(n&1&&(S(0,"div",7),d(),S(1,"svg",11),D(2,"path",12),w(),l(3),w()),n&2){let e=s();r(3),I(" ",e.errorMessage()," ")}}function _e(n,t){n&1&&(S(0,"div",8),d(),S(1,"svg",13),D(2,"path",14),w(),l(3," El reconocimiento de voz no est\xE1 disponible en este navegador. Usa Chrome, Edge o Safari. "),w())}var j=class n{language="es-ES";continuous=!0;interimResults=!0;buttonLabel="Dictar";transcriptChange=new F;recordingStateChange=new F;error=new F;isRecording=u(!1);isSupported=u(!1);currentTranscript=u("");errorMessage=u(null);recognition=null;finalTranscript="";constructor(){this.checkBrowserSupport(),this.isSupported()&&this.initializeRecognition()}ngOnDestroy(){this.recognition&&this.recognition.stop()}checkBrowserSupport(){let t=window.SpeechRecognition||window.webkitSpeechRecognition;this.isSupported.set(!!t)}initializeRecognition(){let t=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new t,this.recognition.lang=this.language,this.recognition.continuous=this.continuous,this.recognition.interimResults=this.interimResults,this.recognition.onresult=e=>{let o="";for(let _=e.resultIndex;_<e.results.length;_++){let y=e.results[_][0].transcript;e.results[_].isFinal?this.finalTranscript+=y+" ":o+=y}let c=this.finalTranscript+o;this.currentTranscript.set(c),this.transcriptChange.emit(c.trim())},this.recognition.onend=()=>{this.isRecording.set(!1),this.recordingStateChange.emit(!1),this.finalTranscript&&this.transcriptChange.emit(this.finalTranscript.trim())},this.recognition.onerror=e=>{console.error("Speech recognition error:",e.error);let o="Error al procesar el audio";switch(e.error){case"no-speech":o="No se detect\xF3 ning\xFAn discurso";break;case"audio-capture":o="No se pudo capturar el audio del micr\xF3fono";break;case"not-allowed":o="Permiso de micr\xF3fono denegado";break;case"network":o="Error de red";break;case"aborted":o="Grabaci\xF3n abortada";break}this.errorMessage.set(o),this.error.emit(o),this.isRecording.set(!1),this.recordingStateChange.emit(!1)},this.recognition.onstart=()=>{this.errorMessage.set(null)}}toggleRecording(){if(!this.isSupported()){this.errorMessage.set("Tu navegador no soporta el reconocimiento de voz"),this.error.emit("Browser not supported");return}this.isRecording()?this.stopRecording():this.startRecording()}startRecording(){try{this.finalTranscript="",this.currentTranscript.set(""),this.errorMessage.set(null),this.recognition.start(),this.isRecording.set(!0),this.recordingStateChange.emit(!0)}catch(t){console.error("Error starting recognition:",t),this.errorMessage.set("Error al iniciar la grabaci\xF3n"),this.error.emit("Failed to start recording")}}stopRecording(){try{this.recognition.stop()}catch(t){console.error("Error stopping recognition:",t)}}clearTranscript(){this.finalTranscript="",this.currentTranscript.set(""),this.transcriptChange.emit("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-voice-input"]],inputs:{language:"language",continuous:"continuous",interimResults:"interimResults",buttonLabel:"buttonLabel"},outputs:{transcriptChange:"transcriptChange",recordingStateChange:"recordingStateChange",error:"error"},decls:11,vars:13,consts:[[1,"voice-input-container"],["type","button",1,"voice-button",3,"click","disabled","title"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mic-icon"],["x","6","y","6","width","12","height","12","stroke-width","2","fill","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"],[1,"button-text"],[1,"recording-indicator"],[1,"error-message"],[1,"info-message"],[1,"recording-dot"],[1,"recording-text"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"error-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"info-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,o){e&1&&(S(0,"div",0)(1,"button",1),q("click",function(){return o.toggleRecording()}),d(),S(2,"svg",2),m(3,ce,1,0,":svg:rect",3)(4,se,1,0,":svg:path",4),w(),C(),S(5,"span",5),m(6,de,1,0)(7,me,1,1),w()(),m(8,ge,4,0,"div",6),m(9,pe,4,1,"div",7),m(10,_e,4,0,"div",8),w()),e&2&&(r(),T("recording",o.isRecording())("disabled",!o.isSupported()),W("disabled",!o.isSupported())("title",o.isRecording()?"Detener grabaci\xF3n":o.buttonLabel),r(),T("pulse",o.isRecording()),r(),g(o.isRecording()?3:4),r(3),g(o.isRecording()?6:7),r(2),g(o.isRecording()?8:-1),r(),g(o.errorMessage()?9:-1),r(),g(o.isSupported()?-1:10))},dependencies:[G],styles:[".voice-input-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.75rem;flex-wrap:wrap}.voice-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:.5rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #667eea33}.voice-button[_ngcontent-%COMP%]:hover:not(.disabled){transform:translateY(-1px);box-shadow:0 4px 8px #667eea4d}.voice-button[_ngcontent-%COMP%]:active:not(.disabled){transform:translateY(0)}.voice-button.recording[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 2px 4px #ef444433}.voice-button.recording[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #ef44444d}.voice-button.disabled[_ngcontent-%COMP%]{background:#9ca3af;cursor:not-allowed;opacity:.6}.mic-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.mic-icon.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}.button-text[_ngcontent-%COMP%]{font-size:.875rem;white-space:nowrap}.recording-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.375rem .75rem;background:#fef2f2;border:1px solid #fecaca;border-radius:.375rem;color:#991b1b}.recording-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#ef4444;border-radius:50%;animation:_ngcontent-%COMP%_blink 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.3}}.recording-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;background:#fef2f2;border:1px solid #fecaca;border-radius:.375rem;color:#991b1b;font-size:.875rem;width:100%;margin-top:.5rem}.error-icon[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0;stroke:#ef4444}.info-message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:.5rem .75rem;background:#eff6ff;border:1px solid #bfdbfe;border-radius:.375rem;color:#1e40af;font-size:.875rem;width:100%;margin-top:.5rem;line-height:1.5}.info-icon[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0;stroke:#3b82f6;margin-top:.125rem}@media(max-width:640px){.voice-button[_ngcontent-%COMP%]{padding:.5rem .875rem;font-size:.8125rem}.button-text[_ngcontent-%COMP%]{display:none}.mic-icon[_ngcontent-%COMP%]{width:18px;height:18px}}"]})};var ue=(n,t)=>t.dateStr,Ce=(n,t)=>t.start,fe=(n,t)=>t.name;function he(n,t){if(n&1){let e=P();i(0,"div",5),d(),i(1,"svg",3),p(2,"path",15),a(),C(),i(3,"span"),l(4),a(),i(5,"button",16),f("click",function(){h(e);let c=s();return b(c.error.set(null))}),l(6,"\xD7"),a()()}if(n&2){let e=s();r(4),k(e.error())}}function be(n,t){if(n&1){let e=P();i(0,"div",6),d(),i(1,"svg",3),p(2,"path",17),a(),C(),i(3,"span"),l(4),a(),i(5,"button",16),f("click",function(){h(e);let c=s();return b(c.successMessage.set(null))}),l(6,"\xD7"),a()()}if(n&2){let e=s();r(4),k(e.successMessage())}}function Me(n,t){n&1&&(i(0,"div",24),p(1,"div",27),i(2,"p"),l(3,"Cargando disponibilidad..."),a()())}function xe(n,t){if(n&1&&(i(0,"div",29),l(1),a()),n&2){let e=t.$implicit;r(),k(e)}}function ve(n,t){n&1&&p(0,"span",34)}function Pe(n,t){if(n&1){let e=P();i(0,"button",32),f("click",function(){let c=h(e).$implicit,_=s(3);return b(_.onDaySelected(c))}),i(1,"span",33),l(2),a(),m(3,ve,1,0,"span",34),a()}if(n&2){let e=t.$implicit,o=s(3);T("other-month",!e.isCurrentMonth)("today",e.isToday)("has-availability",e.hasAvailability)("selected",o.selectedDate()===e.dateStr)("past",e.isPast),x("disabled",!e.hasAvailability||e.isPast||!e.isCurrentMonth),r(2),k(e.date.getDate()),r(),g(e.hasAvailability&&!e.isPast?3:-1)}}function Oe(n,t){if(n&1&&(i(0,"div",28),A(1,xe,2,1,"div",29,J),a(),i(3,"div",30),A(4,Pe,4,13,"button",31,ue),a()),n&2){let e=s(2);r(),z(e.weekDays),r(3),z(e.calendarDays())}}function Se(n,t){n&1&&(i(0,"div",26),d(),i(1,"svg",3),p(2,"path",9),a(),C(),i(3,"p"),l(4,"Selecciona una fecha del calendario"),a()())}function ye(n,t){if(n&1){let e=P();i(0,"button",39),f("click",function(){let c=h(e).$implicit,_=s(4);return b(_.selectSlot(c))}),l(1),a()}if(n&2){let e=t.$implicit,o=s(4);T("selected",o.selectedSlot()===e),x("disabled",o.loading()),r(),R(" ",o.formatTime(e.start)," - ",o.formatTime(e.end)," ")}}function we(n,t){n&1&&(p(0,"span",27),l(1," Agendando... "))}function ke(n,t){n&1&&l(0," Confirmar Cita ")}function Te(n,t){if(n&1){let e=P();i(0,"button",40),f("click",function(){h(e);let c=s(4);return b(c.bookAppointment())}),m(1,we,2,0)(2,ke,1,0),a()}if(n&2){let e=s(4);x("disabled",e.loading()),r(),g(e.loading()?1:2)}}function Ee(n,t){if(n&1&&(i(0,"div",36),A(1,ye,2,5,"button",37,Ce),a(),m(3,Te,3,2,"button",38)),n&2){let e=s(3);r(),z(e.availableSlots()),r(2),g(e.selectedSlot()?3:-1)}}function De(n,t){n&1&&(i(0,"div",35),d(),i(1,"svg",3),p(2,"path",41),a(),C(),i(3,"p"),l(4,"No hay horarios disponibles para esta fecha"),a()())}function Ve(n,t){if(n&1&&m(0,Ee,4,1)(1,De,5,0,"div",35),n&2){let e=s(2);g(e.hasSlots()?0:1)}}function Ae(n,t){if(n&1){let e=P();i(0,"div",12)(1,"div",18)(2,"div",19)(3,"h2"),l(4,"Selecciona una Fecha"),a(),i(5,"div",20)(6,"div",21)(7,"button",22),f("click",function(){h(e);let c=s();return b(c.previousMonth())}),d(),i(8,"svg",3),p(9,"path",4),a()(),C(),i(10,"h3"),l(11),a(),i(12,"button",22),f("click",function(){h(e);let c=s();return b(c.nextMonth())}),d(),i(13,"svg",3),p(14,"path",23),a()()(),m(15,Me,4,0,"div",24)(16,Oe,6,0),a()()(),C(),i(17,"div",25)(18,"div",19)(19,"h2"),l(20,"Horarios Disponibles"),a(),m(21,Se,5,0,"div",26)(22,Ve,2,1),a()()()}if(n&2){let e=s();r(7),x("disabled",e.loading()),r(4),k(e.getCurrentMonthName()),r(),x("disabled",e.loading()),r(3),g(e.loading()?15:16),r(6),g(e.selectedDate()?22:21)}}function ze(n,t){if(n&1&&(i(0,"div",50)(1,"a",52),d(),i(2,"svg",3),p(3,"path",53),a(),l(4," Unirse a la reuni\xF3n "),a()()),n&2){let e=s().$implicit;r(),x("href",e.meeting_url,Y)}}function Ie(n,t){if(n&1){let e=P();i(0,"button",54),f("click",function(){h(e);let c=s().$implicit,_=s(3);return b(_.cancelAppointment(c))}),l(1," Cancelar Cita "),a()}}function Re(n,t){if(n&1&&(i(0,"div",45)(1,"div",46)(2,"div",47),d(),i(3,"svg",3),p(4,"path",9),a(),C(),i(5,"span"),l(6),a()(),i(7,"span",48),l(8),a()(),i(9,"div",49),d(),i(10,"svg",3),p(11,"path",41),a(),C(),i(12,"span"),l(13),a()(),m(14,ze,5,1,"div",50),m(15,Ie,2,0,"button",51),a()),n&2){let e=t.$implicit,o=s(3);U(o.getStatusClass(e.status)),r(6),k(o.formatDate(e.start_datetime)),r(),U(o.getStatusClass(e.status)),r(),I(" ",e.status," "),r(5),R("",o.formatTime(e.start_datetime)," - ",o.formatTime(e.end_datetime)),r(),g(e.meeting_url?14:-1),r(),g(e.status==="Confirmed"||e.status==="Draft"?15:-1)}}function Le(n,t){if(n&1&&(i(0,"div",42),A(1,Re,16,10,"div",44,fe),a()),n&2){let e=s(2);r(),z(e.userAppointments())}}function Ne(n,t){n&1&&(i(0,"div",43),d(),i(1,"svg",3),p(2,"path",9),a(),C(),i(3,"p"),l(4,"No tienes citas agendadas"),a()())}function Fe(n,t){if(n&1&&(i(0,"div",13)(1,"div",19)(2,"h2"),l(3,"Mis Citas Agendadas"),a(),m(4,Le,3,0,"div",42)(5,Ne,5,0,"div",43),a()()),n&2){let e=s();r(4),g(e.userAppointments().length>0?4:5)}}function He(n,t){if(n&1){let e=P();i(0,"div",58)(1,"div",62)(2,"h3",63),l(3,"Detalles de la Cita"),a(),i(4,"div",64)(5,"div",65),d(),i(6,"svg",3),p(7,"path",9),a(),C(),i(8,"div")(9,"span",66),l(10,"Fecha"),a(),i(11,"span",67),l(12),a()()(),i(13,"div",65),d(),i(14,"svg",3),p(15,"path",41),a(),C(),i(16,"div")(17,"span",66),l(18,"Horario"),a(),i(19,"span",67),l(20),a()()()()(),i(21,"div",68)(22,"div",69)(23,"label",70),d(),i(24,"svg",3),p(25,"path",71),a(),l(26," Contexto de la Cita (Opcional) "),a(),C(),i(27,"p",72),l(28,"Agrega detalles sobre el motivo de la cita. Puedes escribir o usar el dictado por voz."),a(),i(29,"textarea",73),f("ngModelChange",function(c){h(e);let _=s(2);return b(_.appointmentContext.set(c))}),a(),i(30,"div",74)(31,"app-voice-input",75),f("transcriptChange",function(c){h(e);let _=s(2);return b(_.appointmentContext.set(c))}),a()()()()()}if(n&2){let e=s(2);r(12),k(e.formatDate(e.selectedSlot().start)),r(8),R("",e.formatTime(e.selectedSlot().start)," - ",e.formatTime(e.selectedSlot().end)),r(9),x("ngModel",e.appointmentContext())("disabled",e.loading()),r(2),x("language","es-ES")("continuous",!0)("interimResults",!0)("buttonLabel","Dictar por voz")}}function Ge(n,t){n&1&&(p(0,"span",27),l(1," Confirmando... "))}function je(n,t){n&1&&l(0," Confirmar Cita ")}function Ye(n,t){if(n&1){let e=P();i(0,"div",14)(1,"div",55)(2,"div",56)(3,"div",57),d(),i(4,"svg",3),p(5,"path",9),a()(),C(),i(6,"h2"),l(7,"Confirmar Cita"),a(),i(8,"p"),l(9,"Revisa los detalles de tu cita antes de confirmar"),a()(),m(10,He,32,9,"div",58),i(11,"div",59)(12,"button",60),f("click",function(){h(e);let c=s();return b(c.closePreConfirmModal())}),l(13," Cancelar "),a(),i(14,"button",61),f("click",function(){h(e);let c=s();return b(c.confirmBooking())}),m(15,Ge,2,0)(16,je,1,0),a()()()()}if(n&2){let e=s();r(10),g(e.selectedSlot()?10:-1),r(2),x("disabled",e.loading()),r(2),x("disabled",e.loading()),r(),g(e.loading()?15:16)}}function Ue(n,t){if(n&1&&(i(0,"div",65),d(),i(1,"svg",3),p(2,"path",53),a(),C(),i(3,"div")(4,"span",66),l(5,"Link de reuni\xF3n"),a(),i(6,"a",81),l(7," Unirse a la reuni\xF3n \u2192 "),a()()()),n&2){let e=s(3);r(6),x("href",e.confirmedAppointment().meeting_url,Y)}}function $e(n,t){if(n&1&&(i(0,"div",78)(1,"div",64)(2,"div",65),d(),i(3,"svg",3),p(4,"path",9),a(),C(),i(5,"div")(6,"span",66),l(7,"Fecha"),a(),i(8,"span",67),l(9),a()()(),i(10,"div",65),d(),i(11,"svg",3),p(12,"path",41),a(),C(),i(13,"div")(14,"span",66),l(15,"Horario"),a(),i(16,"span",67),l(17),a()()(),m(18,Ue,8,1,"div",65),a()()),n&2){let e=s(2);r(9),k(e.formatDate(e.confirmedAppointment().start_datetime)),r(8),R("",e.formatTime(e.confirmedAppointment().start_datetime)," - ",e.formatTime(e.confirmedAppointment().end_datetime)),r(),g(e.confirmedAppointment().meeting_url?18:-1)}}function Be(n,t){if(n&1){let e=P();i(0,"div",14)(1,"div",76)(2,"div",56)(3,"div",77),d(),i(4,"svg",3),p(5,"path",17),a()(),C(),i(6,"h2"),l(7,"\xA1Cita Agendada Exitosamente!"),a(),i(8,"p"),l(9,"Tu cita ha sido confirmada"),a()(),m(10,$e,19,4,"div",78),i(11,"div",59)(12,"button",79),f("click",function(){h(e);let c=s();return b(c.closeConfirmModal())}),l(13," Agendar otra cita "),a(),i(14,"button",80),f("click",function(){h(e);let c=s();return b(c.viewAppointments())}),l(15," Ver mis citas "),a()()()()}if(n&2){let e=s();r(10),g(e.confirmedAppointment()?10:-1)}}var ie=class n{meetSchedulingService=N(oe);stateService=N(X);router=N(Q);calendarResource=u("");showCalendarView=u(!0);loading=u(!1);loadingSlots=u(!1);error=u(null);successMessage=u(null);activeTab=u("book");showPreConfirmModal=u(!1);showConfirmModal=u(!1);confirmedAppointment=u(null);appointmentContext=u("");selectedDate=u("");availableSlots=u([]);selectedSlot=u(null);dateOptions=u([]);currentMonth=u(new Date);calendarDays=u([]);availabilityMap=u(new Map);monthNames=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];weekDays=["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"];userAppointments=u([]);hasSlots=K(()=>this.availableSlots().length>0);currentUser=this.stateService.currentUser;userContact=this.stateService.userContact;selectedPortal=this.stateService.selectedPortal;ngOnInit(){let e=this.selectedPortal()?.tools.find(o=>o.tool_type==="meet_scheduling");e&&e.calendar_resource?(this.calendarResource.set(e.calendar_resource),this.showCalendarView.set(e.show_calendar_view??!0),this.loadCalendarMonth(this.currentMonth()),this.loadUserAppointments()):this.error.set("Configuraci\xF3n de calendario no encontrada")}loadCalendarMonth(t){let e=this.calendarResource();if(!e)return;let o=new Date(t.getFullYear(),t.getMonth(),1),c=new Date(t.getFullYear(),t.getMonth()+1,0);this.generateCalendarDays(t),this.loading.set(!0),this.error.set(null);let _=this.formatDateISO(o),y=this.formatDateISO(c);this.meetSchedulingService.getAvailableSlots(e,_,y).subscribe({next:L=>{let E=new Map;L.filter(O=>O.is_available).forEach(O=>{let V=O.start.split(" ")[0];E.has(V)||E.set(V,[]),E.get(V).push(O)}),this.availabilityMap.set(E),this.updateCalendarAvailability(),this.loading.set(!1)},error:L=>{console.error("Error loading month slots:",L),this.error.set("Error al cargar disponibilidad del mes"),this.loading.set(!1)}})}generateCalendarDays(t){let e=t.getFullYear(),o=t.getMonth(),c=new Date;c.setHours(0,0,0,0);let y=new Date(e,o,1).getDay(),E=new Date(e,o+1,0).getDate(),O=[];for(let v=0;v<y;v++){let M=new Date(e,o,-y+v+1);O.push({date:M,dateStr:this.formatDateISO(M),isCurrentMonth:!1,isToday:!1,hasAvailability:!1,isPast:M<c})}for(let v=1;v<=E;v++){let M=new Date(e,o,v),ae=this.isSameDay(M,c);O.push({date:M,dateStr:this.formatDateISO(M),isCurrentMonth:!0,isToday:ae,hasAvailability:!1,isPast:M<c})}let V=42-O.length;for(let v=1;v<=V;v++){let M=new Date(e,o+1,v);O.push({date:M,dateStr:this.formatDateISO(M),isCurrentMonth:!1,isToday:!1,hasAvailability:!1,isPast:M<c})}this.calendarDays.set(O)}updateCalendarAvailability(){let t=this.availabilityMap(),e=this.calendarDays().map(o=>B($({},o),{hasAvailability:t.has(o.dateStr)&&(t.get(o.dateStr)?.length??0)>0}));this.calendarDays.set(e)}previousMonth(){let t=this.currentMonth(),e=new Date(t.getFullYear(),t.getMonth()-1,1);this.currentMonth.set(e),this.loadCalendarMonth(e),this.clearSelection()}nextMonth(){let t=this.currentMonth(),e=new Date(t.getFullYear(),t.getMonth()+1,1);this.currentMonth.set(e),this.loadCalendarMonth(e),this.clearSelection()}getCurrentMonthName(){let t=this.currentMonth();return`${this.monthNames[t.getMonth()]} ${t.getFullYear()}`}onDaySelected(t){if(!t.isCurrentMonth||t.isPast||!t.hasAvailability)return;this.selectedDate.set(t.dateStr),this.selectedSlot.set(null);let e=this.availabilityMap().get(t.dateStr)||[];this.availableSlots.set(e)}clearSelection(){this.selectedDate.set(""),this.selectedSlot.set(null),this.availableSlots.set([])}generateDateOptions(){let t=[],e=new Date;for(let o=0;o<14;o++){let c=new Date(e);c.setDate(c.getDate()+o);let _=this.formatDateLabel(c),y=this.formatDateISO(c);t.push({date:c,label:_,value:y})}this.dateOptions.set(t)}formatDateLabel(t){let e=new Date,o=new Date(e);return o.setDate(o.getDate()+1),this.isSameDay(t,e)?"Hoy - "+t.toLocaleDateString("es-ES",{weekday:"long",month:"short",day:"numeric"}):this.isSameDay(t,o)?"Ma\xF1ana - "+t.toLocaleDateString("es-ES",{weekday:"long",month:"short",day:"numeric"}):t.toLocaleDateString("es-ES",{weekday:"long",month:"short",day:"numeric"})}formatDateISO(t){return t.toISOString().split("T")[0]}isSameDay(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}onDateSelected(t){this.selectedDate.set(t),this.selectedSlot.set(null),this.loadAvailableSlots(t)}loadAvailableSlots(t){let e=this.calendarResource();e&&(this.loadingSlots.set(!0),this.error.set(null),this.meetSchedulingService.getAvailableSlots(e,t,t).subscribe({next:o=>{this.availableSlots.set(o.filter(c=>c.is_available)),this.loadingSlots.set(!1)},error:o=>{console.error("Error loading slots:",o),this.error.set("Error al cargar horarios disponibles"),this.loadingSlots.set(!1)}}))}selectSlot(t){this.selectedSlot.set(t)}switchTab(t){this.activeTab.set(t),this.error.set(null),this.successMessage.set(null)}bookAppointment(){let t=this.selectedSlot(),e=this.userContact(),o=this.calendarResource();if(!t||!e||!e.name||!o){this.error.set("Por favor selecciona un horario");return}this.appointmentContext.set(""),this.error.set(null),this.showPreConfirmModal.set(!0)}confirmBooking(){let t=this.selectedSlot(),e=this.userContact(),o=this.calendarResource(),c=this.appointmentContext();if(!t||!e||!e.name||!o){this.error.set("Por favor selecciona un horario");return}this.loading.set(!0),this.error.set(null),this.successMessage.set(null),this.meetSchedulingService.createAndConfirmAppointment(o,e.name,t.start,t.end,c).subscribe({next:_=>{this.confirmedAppointment.set(_),this.showPreConfirmModal.set(!1),this.showConfirmModal.set(!0),this.loading.set(!1),this.selectedSlot.set(null),this.selectedDate.set(""),this.availableSlots.set([]),this.appointmentContext.set(""),this.loadUserAppointments()},error:_=>{console.error("Error creating appointment:",_),this.error.set("Error al crear la cita. Por favor intenta de nuevo."),this.loading.set(!1)}})}closePreConfirmModal(){this.showPreConfirmModal.set(!1),this.appointmentContext.set("")}closeConfirmModal(){this.showConfirmModal.set(!1),this.confirmedAppointment.set(null)}viewAppointments(){this.closeConfirmModal(),this.switchTab("appointments")}loadUserAppointments(){this.userContact()?.name&&this.meetSchedulingService.getMyAppointments().subscribe({next:e=>{let o=e.sort((c,_)=>new Date(_.start_datetime).getTime()-new Date(c.start_datetime).getTime());this.userAppointments.set(o)},error:e=>{console.error("Error loading appointments:",e)}})}cancelAppointment(t){t.name&&confirm("\xBFEst\xE1s seguro de cancelar esta cita?")&&this.meetSchedulingService.cancelMyAppointment(t.name).subscribe({next:e=>{this.successMessage.set(e.message||"Cita cancelada exitosamente"),this.loadUserAppointments()},error:e=>{console.error("Error canceling appointment:",e),this.error.set(e.message||"Error al cancelar la cita")}})}formatTime(t){return new Date(t).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}getStatusClass(t){switch(t){case"Confirmed":return"status-confirmed";case"Completed":return"status-completed";case"Cancelled":return"status-cancelled";case"No-show":return"status-noshow";default:return"status-draft"}}goBack(){let t=this.selectedPortal();t&&this.router.navigate(["/portal",t.name])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=H({type:n,selectors:[["app-meet-scheduling-tool"]],decls:24,vars:10,consts:[[1,"meet-scheduling-tool"],[1,"tool-header"],[1,"btn-back",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"tabs"],[1,"tab-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"tab-content"],[1,"booking-layout"],[1,"appointments-container"],[1,"modal-overlay"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"close-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"calendar-section"],[1,"section-card"],[1,"calendar-container"],[1,"calendar-header"],[1,"btn-nav",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"calendar-loading"],[1,"slots-section-container"],[1,"no-selection"],[1,"spinner"],[1,"calendar-weekdays"],[1,"weekday"],[1,"calendar-days"],[1,"calendar-day",3,"other-month","today","has-availability","selected","past","disabled"],[1,"calendar-day",3,"click","disabled"],[1,"day-number"],[1,"availability-dot"],[1,"no-slots"],[1,"slots-grid"],[1,"slot-btn",3,"selected","disabled"],[1,"btn-book",3,"disabled"],[1,"slot-btn",3,"click","disabled"],[1,"btn-book",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"appointments-list"],[1,"no-appointments"],[1,"appointment-card",3,"class"],[1,"appointment-card"],[1,"appointment-header"],[1,"appointment-date"],[1,"status-badge"],[1,"appointment-time"],[1,"appointment-link"],[1,"btn-cancel"],["target","_blank","rel","noopener noreferrer",3,"href"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"btn-cancel",3,"click"],[1,"modal-content","modal-large"],[1,"modal-header"],[1,"modal-icon","info"],[1,"modal-body","modal-body-two-columns"],[1,"modal-footer"],[1,"btn-secondary",3,"click","disabled"],[1,"btn-primary",3,"click","disabled"],[1,"appointment-info-column"],[1,"column-title"],[1,"appointment-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"context-column"],[1,"context-section"],["for","appointment-context"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"context-hint"],["id","appointment-context","placeholder","Ejemplo: Consulta sobre contratos laborales, necesito asesor\xEDa para revisar una cl\xE1usula espec\xEDfica...","rows","4",1,"context-textarea",3,"ngModelChange","ngModel","disabled"],[2,"margin-top","0.75rem"],[3,"transcriptChange","language","continuous","interimResults","buttonLabel"],[1,"modal-content"],[1,"modal-icon","success"],[1,"modal-body"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],["target","_blank","rel","noopener noreferrer",1,"meeting-link",3,"href"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return o.goBack()}),d(),i(3,"svg",3),p(4,"path",4),a(),l(5," Volver "),a(),C(),i(6,"h1"),l(7,"Gesti\xF3n de Citas"),a()(),m(8,he,7,1,"div",5),m(9,be,7,1,"div",6),i(10,"div",7)(11,"button",8),f("click",function(){return o.switchTab("book")}),d(),i(12,"svg",3),p(13,"path",9),a(),l(14," Agendar Cita "),a(),C(),i(15,"button",8),f("click",function(){return o.switchTab("appointments")}),d(),i(16,"svg",3),p(17,"path",10),a(),l(18," Mis Citas "),a()(),C(),i(19,"div",11),m(20,Ae,23,5,"div",12),m(21,Fe,6,1,"div",13),a()(),m(22,Ye,17,4,"div",14),m(23,Be,16,1,"div",14)),e&2&&(r(8),g(o.error()?8:-1),r(),g(o.successMessage()?9:-1),r(2),T("active",o.activeTab()==="book"),r(4),T("active",o.activeTab()==="appointments"),r(5),g(o.activeTab()==="book"?20:-1),r(),g(o.activeTab()==="appointments"?21:-1),r(),g(o.showPreConfirmModal()?22:-1),r(),g(o.showConfirmModal()?23:-1))},dependencies:[G,ne,Z,ee,te,j],styles:[".meet-scheduling-tool[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.tool-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:2rem}.tool-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#fff;border:1px solid #e2e8f0;border-radius:.5rem;color:#4a5568;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s}.tool-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.tool-header[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.tool-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1a202c;margin:0}.alert[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:.5rem;display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem;position:relative}.alert[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.alert[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.alert[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;opacity:.6;transition:opacity .2s;padding:0;line-height:1}.alert[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{opacity:1}.alert-error[_ngcontent-%COMP%]{background:#fff5f5;color:#c53030;border:1px solid #feb2b2}.alert-success[_ngcontent-%COMP%]{background:#f0fff4;color:#2f855a;border:1px solid #9ae6b4}.tool-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem}.booking-section[_ngcontent-%COMP%], .appointments-section[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 2px 8px #00000014}.booking-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .appointments-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1a202c;margin:0 0 1.5rem}.booking-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .appointments-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#2d3748;margin:0 0 1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#2d3748;margin-bottom:.5rem;font-size:.95rem}.form-group[_ngcontent-%COMP%]   .date-select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:.5rem;font-size:1rem;background:#fff;cursor:pointer;transition:all .2s}.form-group[_ngcontent-%COMP%]   .date-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-group[_ngcontent-%COMP%]   .date-select[_ngcontent-%COMP%]:disabled{background:#f7fafc;cursor:not-allowed;opacity:.6}.slots-section[_ngcontent-%COMP%]{margin-top:1.5rem}.loading-slots[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.loading-slots[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(102,126,234,.2);border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.loading-slots[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:.95rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:.75rem}.slots-grid[_ngcontent-%COMP%]   .slot-btn[_ngcontent-%COMP%]{padding:.875rem;background:#fff;border:2px solid #e2e8f0;border-radius:.5rem;font-size:.95rem;font-weight:500;color:#2d3748;cursor:pointer;transition:all .2s}.slots-grid[_ngcontent-%COMP%]   .slot-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;background:#f7fafc}.slots-grid[_ngcontent-%COMP%]   .slot-btn.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#667eea;color:#fff}.slots-grid[_ngcontent-%COMP%]   .slot-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.no-slots[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem;text-align:center}.no-slots[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:#cbd5e0;margin-bottom:1rem}.no-slots[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:.95rem}.btn-book[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:.5rem;margin-top:1.5rem}.btn-book[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 10px 20px #667eea4d}.btn-book[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-book[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-book[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.appointments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.appointment-card[_ngcontent-%COMP%]{padding:1.5rem;border:2px solid #e2e8f0;border-radius:.75rem;transition:all .2s}.appointment-card.status-confirmed[_ngcontent-%COMP%]{border-color:#9ae6b4;background:#f0fff4}.appointment-card.status-completed[_ngcontent-%COMP%]{border-color:#cbd5e0;background:#f7fafc}.appointment-card.status-cancelled[_ngcontent-%COMP%]{border-color:#feb2b2;background:#fff5f5}.appointment-card[_ngcontent-%COMP%]   .appointment-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.75rem}.appointment-card[_ngcontent-%COMP%]   .appointment-date[_ngcontent-%COMP%], .appointment-card[_ngcontent-%COMP%]   .appointment-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#2d3748;font-size:.95rem}.appointment-card[_ngcontent-%COMP%]   .appointment-date[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .appointment-card[_ngcontent-%COMP%]   .appointment-time[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#718096}.appointment-card[_ngcontent-%COMP%]   .appointment-time[_ngcontent-%COMP%]{margin-bottom:.75rem}.appointment-card[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:9999px;font-size:.85rem;font-weight:600}.appointment-card[_ngcontent-%COMP%]   .status-badge.status-confirmed[_ngcontent-%COMP%]{background:#9ae6b4;color:#22543d}.appointment-card[_ngcontent-%COMP%]   .status-badge.status-completed[_ngcontent-%COMP%]{background:#cbd5e0;color:#2d3748}.appointment-card[_ngcontent-%COMP%]   .status-badge.status-cancelled[_ngcontent-%COMP%]{background:#feb2b2;color:#742a2a}.appointment-card[_ngcontent-%COMP%]   .status-badge.status-draft[_ngcontent-%COMP%]{background:#fbd38d;color:#744210}.appointment-card[_ngcontent-%COMP%]   .appointment-link[_ngcontent-%COMP%]{margin:.75rem 0}.appointment-card[_ngcontent-%COMP%]   .appointment-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#667eea;color:#fff;text-decoration:none;border-radius:.5rem;font-size:.9rem;font-weight:500;transition:all .2s}.appointment-card[_ngcontent-%COMP%]   .appointment-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.appointment-card[_ngcontent-%COMP%]   .appointment-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#5568d3}.appointment-card[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#fff;border:2px solid #feb2b2;border-radius:.5rem;color:#c53030;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;margin-top:.75rem}.appointment-card[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#fff5f5;border-color:#fc8181}.no-appointments[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:3rem 2rem;text-align:center}.no-appointments[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#cbd5e0;margin-bottom:1rem}.no-appointments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem}@media(max-width:1024px){.tool-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:768px){.meet-scheduling-tool[_ngcontent-%COMP%]{padding:1.5rem}.tool-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.booking-section[_ngcontent-%COMP%], .appointments-section[_ngcontent-%COMP%]{padding:1.5rem}.slots-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}}@media(max-width:480px){.meet-scheduling-tool[_ngcontent-%COMP%]{padding:1rem}.tool-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.tool-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.booking-section[_ngcontent-%COMP%], .appointments-section[_ngcontent-%COMP%]{padding:1rem}.slots-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:.75rem;padding:1.5rem;border:1px solid #e2e8f0;margin-bottom:1.5rem}.calendar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}.calendar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#1a202c;margin:0;text-align:center;flex:1}.calendar-header[_ngcontent-%COMP%]   .btn-nav[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:.5rem;background:#fff;border:1px solid #e2e8f0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;color:#4a5568}.calendar-header[_ngcontent-%COMP%]   .btn-nav[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.calendar-header[_ngcontent-%COMP%]   .btn-nav[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7fafc;border-color:#cbd5e0}.calendar-header[_ngcontent-%COMP%]   .btn-nav[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.calendar-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:3rem 1rem}.calendar-loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid rgba(102,126,234,.2);border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}.calendar-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:.95rem}.calendar-weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem;margin-bottom:.5rem}.calendar-weekdays[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{text-align:center;font-size:.85rem;font-weight:600;color:#718096;padding:.5rem}.calendar-days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem}.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]{aspect-ratio:1;border:2px solid #e2e8f0;border-radius:.5rem;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;cursor:pointer;transition:all .2s;padding:.5rem}.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:#2d3748}.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .availability-dot[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:#48bb78;position:absolute;bottom:6px}.calendar-days[_ngcontent-%COMP%]   .calendar-day.other-month[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:#cbd5e0}.calendar-days[_ngcontent-%COMP%]   .calendar-day.past[_ngcontent-%COMP%]{background:#f7fafc}.calendar-days[_ngcontent-%COMP%]   .calendar-day.past[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:#a0aec0}.calendar-days[_ngcontent-%COMP%]   .calendar-day.today[_ngcontent-%COMP%]{border-color:#667eea}.calendar-days[_ngcontent-%COMP%]   .calendar-day.today[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:#667eea;font-weight:700}.calendar-days[_ngcontent-%COMP%]   .calendar-day.has-availability[_ngcontent-%COMP%]:not(:disabled){border-color:#48bb78;background:#f0fff4}.calendar-days[_ngcontent-%COMP%]   .calendar-day.has-availability[_ngcontent-%COMP%]:not(:disabled):hover{background:#c6f6d5;transform:scale(1.05);box-shadow:0 4px 12px #48bb7833}.calendar-days[_ngcontent-%COMP%]   .calendar-day.selected[_ngcontent-%COMP%]{background:#667eea;border-color:#667eea}.calendar-days[_ngcontent-%COMP%]   .calendar-day.selected[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{color:#fff;font-weight:700}.calendar-days[_ngcontent-%COMP%]   .calendar-day.selected[_ngcontent-%COMP%]   .availability-dot[_ngcontent-%COMP%]{background:#fff}.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]:not(:disabled):active{transform:scale(.95)}@media(max-width:768px){.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .day-number[_ngcontent-%COMP%]{font-size:.85rem}.calendar-days[_ngcontent-%COMP%]   .calendar-day[_ngcontent-%COMP%]   .availability-dot[_ngcontent-%COMP%]{width:4px;height:4px;bottom:4px}}.tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:2rem;border-bottom:2px solid #e2e8f0}.tab-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:none;border:none;border-bottom:3px solid transparent;color:#718096;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;margin-bottom:-2px}.tab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.tab-btn[_ngcontent-%COMP%]:hover{color:#4a5568;background:#f7fafc}.tab-btn.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea;background:transparent}.tab-content[_ngcontent-%COMP%]{animation:fadeIn .3s ease-out}.booking-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;align-items:start}.calendar-section[_ngcontent-%COMP%], .slots-section-container[_ngcontent-%COMP%]{min-height:500px}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;padding:2rem;box-shadow:0 2px 8px #00000014;height:100%}.section-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1a202c;margin:0 0 1.5rem}.no-selection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.no-selection[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#cbd5e0;margin-bottom:1rem}.no-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem;margin:0}.appointments-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .3s ease-out;padding:1rem}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;max-width:500px;width:100%;max-height:90dvh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.modal-content.modal-large[_ngcontent-%COMP%]{max-width:900px}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{text-align:center;padding:2.5rem 2rem 1.5rem;border-bottom:1px solid #e2e8f0;flex-shrink:0}.modal-header[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .modal-icon.success[_ngcontent-%COMP%]{background:#f0fff4;color:#38a169}.modal-header[_ngcontent-%COMP%]   .modal-icon.info[_ngcontent-%COMP%]{background:#ebf4ff;color:#667eea}.modal-header[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1a202c;margin:0 0 .5rem}.modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;font-size:1rem;margin:0}.modal-body[_ngcontent-%COMP%]{padding:2rem;overflow-y:auto;flex:1;min-height:0}.modal-body.modal-body-two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1.5fr;gap:2rem;align-items:start}.appointment-info-column[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#4a5568;text-transform:uppercase;letter-spacing:.05em;margin:0 0 1rem}.context-section[_ngcontent-%COMP%]{margin-top:0;padding-top:0;border-top:none}.context-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600;color:#2d3748;margin-bottom:.5rem}.context-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#667eea}.context-section[_ngcontent-%COMP%]   .context-hint[_ngcontent-%COMP%]{font-size:.85rem;color:#718096;margin:0 0 1rem;line-height:1.5}.context-section[_ngcontent-%COMP%]   .context-textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:2px solid #e2e8f0;border-radius:.5rem;font-size:.95rem;font-family:inherit;color:#2d3748;background:#fff;resize:vertical;transition:all .2s;line-height:1.6}.context-section[_ngcontent-%COMP%]   .context-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.context-section[_ngcontent-%COMP%]   .context-textarea[_ngcontent-%COMP%]::placeholder{color:#a0aec0}.context-section[_ngcontent-%COMP%]   .context-textarea[_ngcontent-%COMP%]:disabled{background:#f7fafc;cursor:not-allowed;opacity:.6}.appointment-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#667eea;flex-shrink:0;margin-top:2px}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.25rem}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:#718096;font-weight:500}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1rem;color:#2d3748;font-weight:600}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .meeting-link[_ngcontent-%COMP%]{color:#667eea;text-decoration:none;font-weight:600;font-size:1rem;transition:color .2s}.appointment-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .meeting-link[_ngcontent-%COMP%]:hover{color:#5568d3;text-decoration:underline}.modal-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;border-top:1px solid #e2e8f0;display:flex;gap:1rem;justify-content:flex-end;flex-shrink:0}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;border:none}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#4a5568;border:2px solid #e2e8f0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{background:#f7fafc;border-color:#cbd5e0}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff;display:flex;align-items:center;justify-content:center;gap:.5rem}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5568d3;transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.modal-footer[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@media(max-width:1024px){.booking-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media(max-width:768px){.tool-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.75rem}.tool-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.tabs[_ngcontent-%COMP%]{flex-direction:column;border-bottom:none}.tab-btn[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:1rem;border-bottom:2px solid #e2e8f0;margin-bottom:0}.tab-btn.active[_ngcontent-%COMP%]{border-bottom-color:#667eea;background:#f0f4ff}.section-card[_ngcontent-%COMP%]{padding:1.5rem}.modal-body-two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.modal-footer[_ngcontent-%COMP%]{flex-direction:column}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.modal-content.modal-large[_ngcontent-%COMP%]{max-width:95%}}"]})};export{ie as MeetSchedulingToolComponent};
