import{a as c}from"./chunk-UXRKF7XX.js";import{d as a,i as o,l,o as n}from"./chunk-JFEUYR63.js";var s="common_configurations.api",p=class i{constructor(t){this.frappeApi=t}getPortal(t){return this.callPortalMethodGet("get_portal",{portal_name:t})}getActivePortals(){return this.callPortalMethodGet("get_portals")}createUserContact(t){return this.callPortalMethod("create_user_contact",{data:JSON.stringify(t),honeypot:""}).pipe(o(e=>{e?.auth_token&&this.frappeApi.setUserContactToken(e.auth_token)}))}updateUserContact(t,e){return this.callPortalMethod("update_user_contact",{name:t,data:JSON.stringify(e),honeypot:""})}getUserContactByDocument(t){return this.callPortalMethodGet("get_user_contact_by_document",{document:t}).pipe(o(e=>{e?.auth_token&&this.frappeApi.setUserContactToken(e.auth_token)}))}getAuthenticatedUserContact(){return this.callPortalMethodGet("get_authenticated_user_contact")}logoutUserContact(){return this.callPortalMethod("logout_user_contact",{honeypot:""}).pipe(o(()=>{this.frappeApi.clearUserContactToken()}))}getToolTypes(){return this.frappeApi.getList("Tool Type",[["is_active","=",1]],["*"],0,100).pipe(a(t=>{if(!t.success||!t.data)throw new Error(t.error||"Failed to load tool types");return t.data}))}callPortalMethodGet(t,e){return this.frappeApi.callMethod(`${s}.portal_api.${t}`,e,!0).pipe(a(r=>{if(!r.success&&r.message===void 0)throw new Error(r.error||"API call failed");return r.message}))}callPortalMethod(t,e){return this.frappeApi.callMethod(`${s}.portal_api.${t}`,e,!1).pipe(a(r=>{if(!r.success&&r.message===void 0)throw new Error(r.error||"API call failed");return r.message}))}getUserContactFields(){return this.callPortalMethodGet("get_user_contact_fields")}static \u0275fac=function(e){return new(e||i)(n(c))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{p as a};
