import{a as m}from"./chunk-UXRKF7XX.js";import{d as r,l,o as c}from"./chunk-JFEUYR63.js";var p="meet_scheduling.api.appointment_api",d=class s{constructor(t){this.frappeApi=t}getActiveCalendarResources(){return this.frappeApi.callMethod(`${p}.get_active_calendar_resources`,{},!0).pipe(r(t=>{if(!t.success)throw new Error(t.error||"Failed to load calendar resources");return t.message||[]}))}getAvailableSlots(t,e,n){return this.frappeApi.callMethod(`${p}.get_available_slots`,{calendar_resource:t,from_date:e,to_date:n},!0).pipe(r(a=>{if(!a.success)throw new Error(a.error||"Failed to load available slots");return a.message||[]}))}validateAppointment(t,e,n,a){return this.frappeApi.callMethod(`${p}.validate_appointment`,{calendar_resource:t,start_datetime:e,end_datetime:n,appointment_name:a},!0).pipe(r(i=>{if(!i.message)throw new Error(i.error||"Validation failed");return i.message}))}createAndConfirmAppointment(t,e,n,a,i){return this.frappeApi.callMethod(`${p}.create_and_confirm_appointment`,{calendar_resource:t,user_contact:e,start_datetime:n,end_datetime:a,appointment_context:i,honeypot:""}).pipe(r(o=>{if(!o.success&&!o.message)throw new Error(o.error||"Failed to create appointment");return o.message}))}cancelAppointment(t){return this.frappeApi.callMethod(`${p}.cancel_or_delete_appointment`,{appointment_name:t}).pipe(r(e=>{if(!e.success&&!e.message)throw new Error(e.error||"Failed to cancel appointment");return e.message}))}getAppointment(t){return this.frappeApi.getDoc("Appointment",t).pipe(r(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load appointment");return e.data}))}generateMeeting(t){return this.frappeApi.callMethod(`${p}.generate_meeting`,{appointment_name:t}).pipe(r(e=>{if(!e.message)throw new Error(e.error||"Failed to generate meeting");return e.message}))}getCalendarResource(t){return this.frappeApi.getDoc("Calendar Resource",t).pipe(r(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load calendar resource");return e.data}))}getAvailabilityPlan(t){return this.frappeApi.getDoc("Availability Plan",t).pipe(r(e=>{if(!e.success||!e.data)throw new Error(e.error||"Failed to load availability plan");return e.data}))}getUserAppointments(t){return this.frappeApi.getList("Appointment",[["user_contact","=",t]],["*"],0,100).pipe(r(e=>!e.success||!e.data?[]:e.data))}getResourceAppointments(t,e,n){let a=[["calendar_resource","=",t]];return e&&a.push(["start_datetime",">=",e]),n&&a.push(["start_datetime","<=",n]),this.frappeApi.getList("Appointment",a,["*"],0,100).pipe(r(i=>!i.success||!i.data?[]:i.data))}getMyAppointments(t,e,n){let a={};return t&&(a.status=t),e&&(a.from_date=e),n&&(a.to_date=n),this.frappeApi.callMethod(`${p}.get_my_appointments`,a,!0).pipe(r(i=>{if(!i.success&&!i.message)throw new Error(i.error||"Failed to load appointments");return i.message||[]}))}getMyAppointmentDetail(t){return this.frappeApi.callMethod(`${p}.get_appointment_detail`,{appointment_name:t},!0).pipe(r(e=>{if(!e.success&&!e.message)throw new Error(e.error||"Failed to load appointment");return e.message}))}cancelMyAppointment(t){return this.frappeApi.callMethod(`${p}.cancel_my_appointment`,{appointment_name:t,honeypot:""}).pipe(r(e=>{if(!e.message)throw new Error(e.error||"Failed to cancel appointment");return e.message}))}static \u0275fac=function(e){return new(e||s)(c(m))};static \u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"})};export{d as a};
