import{a as l}from"./chunk-6QOS2Z35.js";import{e,q as o,t as c}from"./chunk-T73TVVXL.js";var n="/api/method/common_configurations.api",p=class i{constructor(t){this.frappeApi=t}getPortal(t){return this.frappeApi.getDoc("Service Portal",t).pipe(e(r=>{if(!r.success||!r.data)throw new Error(r.error||"Failed to load portal");return r.data}))}getActivePortals(){return this.frappeApi.getList("Service Portal",[["is_active","=",1]],["name","portal_name","title","description","logo","primary_color"],0,50).pipe(e(t=>{if(!t.success||!t.data)throw new Error(t.error||"Failed to load portals");return t.data}))}createUserContact(t){return this.frappeApi.createDoc("User Contact",t).pipe(e(r=>{if(!r.success||!r.data)throw new Error(r.error||"Failed to create user contact");return r.data}))}updateUserContact(t,r){return this.frappeApi.updateDoc("User Contact",t,r).pipe(e(a=>{if(!a.success||!a.data)throw new Error(a.error||"Failed to update user contact");return a.data}))}getUserContactByEmail(t){return this.frappeApi.getList("User Contact",[["email","=",t]],["*"],0,1).pipe(e(r=>!r.success||!r.data||r.data.length===0?null:r.data[0]))}getToolTypes(){return this.frappeApi.getList("Tool Type",[["is_active","=",1]],["*"],0,100).pipe(e(t=>{if(!t.success||!t.data)throw new Error(t.error||"Failed to load tool types");return t.data}))}callPortalMethod(t,r){return this.frappeApi.callMethod(`${n}.portal_api.${t}`,r).pipe(e(a=>{if(!a.success&&a.message===void 0)throw new Error(a.error||"API call failed");return a.message}))}static \u0275fac=function(r){return new(r||i)(c(l))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{p as a};
